import{u as ml,r as u,b as T,c as B,m as vl,d as Q,o as F,f as a,g as o,h as c,H as V,a4 as ie,E as s,a2 as _l,M as Ce,p as re,e as r,k as f,K as x,a5 as gl,a6 as hl,t as y,J as bl,j as yl,Q as $e,R as ze,a7 as wl,a8 as Se,a9 as kl,aa as Vl,ab as xl,a3 as de}from"./index-BI8oO-SX.js";import{f as Cl}from"./date-B59vURDm.js";import{_ as $l}from"./_plugin-vue_export-helper-DlAUqK2U.js";const zl={class:"materials-page"},Sl={class:"folder-header"},Fl={class:"folder-header-actions"},Ul={class:"folder-actions"},Ml={class:"folder-node"},Dl={class:"folder-node-label"},Tl={class:"materials-toolbar"},Bl={class:"toolbar-actions"},Rl={key:0,class:"materials-batch-bar"},Il={class:"batch-left"},El={class:"batch-selected"},Ll={class:"batch-actions"},Pl={class:"material-item"},jl={class:"material-thumb"},Al={class:"material-info"},Kl={class:"material-code"},Nl={class:"material-file"},Ol={class:"material-title"},ql={class:"material-spec"},Wl={class:"materials-pagination"},Hl='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="120" height="120" viewBox="0 0 120 120"><rect width="120" height="120" rx="8" fill="%23f5f5f5"/><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="12" fill="%23999">素材</text></svg>',Ql={__name:"Materials",setup(Gl){const Fe=ml(),G=u([]),J=u(!1),X=u(null),g=u(null),Ue={children:"children",label:"name"},C=u([]),Y=u(!1),Z=u(null),v=u([]),h=T({page:1,pageSize:10,total:0}),b=T({keyword:"",shape:"",format:""}),Me=["超横形","横向形","似方形","竖向形","超竖形"],De=["超横形: 宽:高=1:0.2（含以下）","横向形: 宽:高=1:0.2~1:0.9","似方形: 宽:高=1:0.9~1:1.1","竖向形: 宽:高=1:1.1~1:1.8","超竖形: 宽:高=1:1.8（以上）"].join("<br />"),se=u([]),R=u(!1),Te=u(null),p=T({code:"",title:"",folder_id:null,order_count:0}),N=u([]),U=u([]),ee=u(!1),Be=["jpg","jpeg","png","gif","bmp","webp"],I=u(!1),E=T({folder_id:null}),L=u(!1),Re=u(null),d=T({id:null,code:"",file_name:"",title:"",folder_id:null,order_count:0,shape:"",width:0,height:0,format:"",file_size:0,storage:"",file_path:""}),le=u(!1),P=u(!1),j=u("create"),ue=u(null),m=T({id:null,name:"",parent_id:null}),ae=u(!1),z=B(()=>{var l;return((l=g.value)==null?void 0:l.id)??null}),O=B(()=>ce(G.value)),fe=B(()=>v.value.length>0&&v.value.length===C.value.length),Ie=B(()=>v.value.length>0&&!fe.value),$=u([]),A=u(0),Ee=B(()=>$.value.length?`编辑素材 (${A.value+1}/${$.value.length})`:"编辑素材");function ce(l=[]){return l.map(e=>({value:e.id,label:e.name,children:e.children&&e.children.length?ce(e.children):[]}))}async function M(){var l,e;J.value=!0;try{const t=await V.get("/material-folders");G.value=((l=t.data)==null?void 0:l.data)||[],await ie(),z.value&&((e=X.value)==null||e.setCurrentKey(z.value))}catch(t){console.error("加载文件夹失败",t),s.error("加载文件夹失败")}finally{J.value=!1}}async function w(l=!1){var e;l&&(h.page=1),Y.value=!0;try{const i=((e=(await V.get("/materials",{params:{page:h.page,page_size:h.pageSize,keyword:b.keyword||void 0,shape:b.shape||void 0,format:b.format||void 0,folder_id:z.value||void 0}})).data)==null?void 0:e.data)||{};C.value=i.materials||[],h.total=i.total||0,h.page=i.page||h.page,h.pageSize=i.page_size||h.pageSize;const _=Array.from(new Set(C.value.map(D=>D.format).filter(Boolean)));se.value=_,await ie(),oe()}catch(t){console.error("加载素材失败",t),s.error("加载素材失败")}finally{Y.value=!1}}function Le(l){g.value=l,w(!0)}function pe(){var l;g.value=null,(l=X.value)==null||l.setCurrentKey(null),w(!0)}function te(){w(!0)}function Pe(){b.keyword="",b.shape="",b.format="",pe()}function je(l){h.page=l,w()}function Ae(l){h.pageSize=l,w(!0)}const me=B(()=>N.value.length===1);function Ke(){p.code="",p.title="",p.folder_id=z.value,p.order_count=0,N.value=[],U.value=[],R.value=!0}function ve(l){var i,_;if(!l)return!1;const e=(l.type||"").toLowerCase(),t=(_=(i=l.name)==null?void 0:i.split(".").pop())==null?void 0:_.toLowerCase();return!(!t||!Be.includes(t)||e&&!e.startsWith("image/"))}function Ne(l){return ve(l)||s.error("仅支持上传 jpg/jpeg/png/gif/bmp/webp 图片文件"),!1}function Oe(l,e){const t=e.filter(i=>ve(i.raw)?!0:(s.warning(`文件【${i.name}】不是支持的图片格式，已自动移除`),!1));N.value=t,U.value=t.map(i=>i.raw).filter(Boolean),me.value||(p.code="",p.title="")}async function qe(){var l,e;if(!U.value.length){s.warning("请先选择素材文件");return}ee.value=!0;try{for(const[t,i]of U.value.entries()){const _=new FormData;_.append("file",i),me.value&&(p.code&&_.append("code",p.code),p.title&&_.append("title",p.title)),p.folder_id&&_.append("folder_id",p.folder_id),p.order_count!=null&&_.append("order_count",String(p.order_count)),await V.post("/materials/upload",_),U.value.length>1&&s.success(`已上传 ${t+1}/${U.value.length} 个素材`)}s.success("上传成功"),R.value=!1,w(!0),M()}catch(t){console.error("上传素材失败",t),s.error(((e=(l=t.response)==null?void 0:l.data)==null?void 0:e.error)||"上传素材失败")}finally{ee.value=!1}}function _e(l,e=!1){d.id=l.id,d.code=l.code,d.file_name=l.file_name,d.title=l.title,d.folder_id=l.folder_id||null,d.order_count=l.order_count??0,d.shape=l.shape||"",d.width=l.width||0,d.height=l.height||0,d.format=l.format||"",d.file_size=l.file_size||0,d.storage=l.storage||"",d.file_path=l.file_path||"",e||($.value=[],A.value=0),L.value=!0}async function We(){var l,e;if(d.id){le.value=!0;try{const t={title:d.title,folder_id:d.folder_id,order_count:d.order_count,shape:d.shape,width:d.width,height:d.height,format:d.format,file_size:d.file_size};if(await V.put(`/materials/${d.id}`,t),s.success("保存成功"),await w(),M(),$.value.length){const i=A.value+1;if(i<$.value.length){A.value=i;const _=$.value[i].id,D=C.value.find(q=>q.id===_)||$.value[i];_e(D,!0);return}$.value=[],A.value=0}L.value=!1}catch(t){console.error("保存素材失败",t),s.error(((e=(l=t.response)==null?void 0:l.data)==null?void 0:e.error)||"保存素材失败")}finally{le.value=!1}}}async function He(l){var e,t;try{await de.confirm(`确定删除素材【${l.title||l.file_name}】吗？`,"提示",{type:"warning"}),await V.delete(`/materials/${l.id}`),s.success("删除成功"),w()}catch(i){i!=="cancel"&&(console.error("删除素材失败",i),s.error(((t=(e=i.response)==null?void 0:e.data)==null?void 0:t.error)||"删除素材失败"))}}function Qe(l){v.value=l}function oe(){var l;(l=Z.value)==null||l.clearSelection(),v.value=[]}function Ge(l){const e=Z.value;e&&(e.clearSelection(),l&&C.value.forEach(t=>{e.toggleRowSelection(t,!0)}))}async function Je(){var l,e;if(v.value.length){try{await de.confirm(`确定删除选中的 ${v.value.length} 个素材吗？`,"提示",{type:"warning"})}catch(t){t!=="cancel"&&console.error("批量删除取消或失败",t);return}try{await Promise.all(v.value.map(t=>V.delete(`/materials/${t.id}`))),s.success("批量删除成功"),oe(),w()}catch(t){console.error("批量删除素材失败",t),s.error(((e=(l=t.response)==null?void 0:l.data)==null?void 0:e.error)||"批量删除素材失败")}}}function ge(l){const e=Fe.token||localStorage.getItem("token");if(!l||!e||!(l.startsWith("/api/")||l.startsWith(`${window.location.origin}/api/`)))return l;const i=l.includes("?")?"&":"?";return`${l}${i}token=${encodeURIComponent(e)}`}function he(l){let e=l.preview_url||l.download_url;return!e&&l.id&&(e=`/api/materials/${l.id}/download?disposition=inline`),ge(e)}function Xe(l){let e=l.download_url;return!e&&l.id&&(e=`/api/materials/${l.id}/download?disposition=attachment`),ge(e)}function Ye(l){return he(l)||Hl}function Ze(l){const e=he(l);return e?[e]:[]}function el(){if(!v.value.length){s.warning("请先选择素材");return}E.folder_id=z.value||null,I.value=!0}async function ll(){var e,t;if(!v.value.length){s.warning("请选择要移动的素材");return}const l={folder_id:E.folder_id||null};try{await Promise.all(v.value.map(i=>V.put(`/materials/${i.id}`,l))),s.success("移动成功"),I.value=!1,w(),M()}catch(i){console.error("移动素材失败",i),s.error(((t=(e=i.response)==null?void 0:e.data)==null?void 0:t.error)||"移动素材失败")}}function al(l){const e=Xe(l);if(!e){s.warning("无法获取下载链接");return}window.open(e,"_blank")}function be(l){if(j.value=l,l==="create")m.id=null,m.name="",m.parent_id=z.value||null;else if(l==="rename"&&g.value)m.id=g.value.id,m.name=g.value.name,m.parent_id=g.value.parent_id||null;else return;P.value=!0,ie(()=>{var e;(e=ue.value)==null||e.clearValidate()})}async function tl(){var e,t;const l={name:m.name.trim(),parent_id:m.parent_id||null};if(!l.name){s.warning("文件夹名称不能为空");return}if(j.value==="rename"&&m.id&&l.parent_id===m.id){s.warning("上级文件夹不能为自身");return}ae.value=!0;try{j.value==="create"?(await V.post("/material-folders",l),s.success("新增文件夹成功")):j.value==="rename"&&m.id&&(await V.put(`/material-folders/${m.id}`,l),s.success("更新文件夹成功")),P.value=!1,M()}catch(i){console.error("保存文件夹失败",i),s.error(((t=(e=i.response)==null?void 0:e.data)==null?void 0:t.error)||"保存文件夹失败")}finally{ae.value=!1}}async function ol(){var l,e;if(g.value)try{await de.confirm(`确定删除文件夹【${g.value.name}】吗？该操作不可恢复。`,"提示",{type:"warning"}),await V.delete(`/material-folders/${g.value.id}`),s.success("删除成功"),g.value=null,M(),w(!0)}catch(t){t!=="cancel"&&(console.error("删除文件夹失败",t),s.error(((e=(l=t.response)==null?void 0:l.data)==null?void 0:e.error)||"删除文件夹失败"))}}function nl(l){if(l.dimensions)return l.dimensions;const e=l.width||0,t=l.height||0;return!e||!t?"-":`${e} × ${t}`}function il(l){if(!l)return"-";const e=["B","KB","MB","GB","TB"];let t=l,i=0;for(;t>=1024&&i<e.length-1;)t/=1024,i++;return`${t.toFixed(i===0?0:2)} ${e[i]}`}function ye(l){return Cl(l)}return vl(()=>{M(),w(!0)}),(l,e)=>{const t=c("el-button"),i=c("el-icon"),_=c("el-tree"),D=c("el-card"),q=c("el-col"),ne=c("el-input"),k=c("el-form-item"),rl=c("el-tooltip"),we=c("el-option"),ke=c("el-select"),K=c("el-form"),dl=c("el-checkbox"),S=c("el-table-column"),sl=c("el-image"),ul=c("el-table"),fl=c("el-pagination"),cl=c("el-row"),pl=c("el-upload"),W=c("el-tree-select"),H=c("el-dialog"),Ve=_l("loading");return F(),Q("div",zl,[a(cl,{gutter:16},{default:o(()=>[a(q,{span:4,class:"folder-column"},{default:o(()=>[Ce((F(),re(D,{shadow:"never",class:"folder-card"},{default:o(()=>[r("div",Sl,[e[21]||(e[21]=r("span",{class:"folder-title"},"素材文件夹",-1)),r("div",Fl,[a(t,{text:"",size:"small",onClick:pe},{default:o(()=>[...e[19]||(e[19]=[f("全部素材",-1)])]),_:1}),a(t,{size:"small",type:"primary",onClick:e[0]||(e[0]=n=>be("create"))},{default:o(()=>[a(i,null,{default:o(()=>[a(x(gl))]),_:1}),e[20]||(e[20]=f(" 新建 ",-1))]),_:1})])]),r("div",Ul,[a(t,{size:"small",disabled:!g.value,onClick:e[1]||(e[1]=n=>be("rename"))},{default:o(()=>[...e[22]||(e[22]=[f("重命名",-1)])]),_:1},8,["disabled"]),a(t,{size:"small",type:"danger",plain:"",disabled:!g.value,onClick:ol},{default:o(()=>[...e[23]||(e[23]=[f("删除",-1)])]),_:1},8,["disabled"])]),a(_,{ref_key:"folderTreeRef",ref:X,class:"folder-tree",data:G.value,props:Ue,"node-key":"id","highlight-current":"","default-expand-all":!0,"current-node-key":z.value,onNodeClick:Le,"empty-text":"暂无文件夹"},{default:o(({data:n})=>[r("span",Ml,[a(i,{class:"folder-node-icon"},{default:o(()=>[a(x(hl))]),_:1}),r("span",Dl,y(n.name),1)])]),_:1},8,["data","current-node-key"])]),_:1})),[[Ve,J.value]])]),_:1}),a(q,{span:20},{default:o(()=>[a(D,{shadow:"never",class:"materials-card"},{default:o(()=>[r("div",Tl,[a(K,{inline:!0,model:b,class:"materials-filter"},{default:o(()=>[a(k,{label:"关键词"},{default:o(()=>[a(ne,{modelValue:b.keyword,"onUpdate:modelValue":e[2]||(e[2]=n=>b.keyword=n),placeholder:"编号/文件名/标题",clearable:"",onKeyup:yl(te,["enter"]),onClear:te},null,8,["modelValue"])]),_:1}),a(k,null,{label:o(()=>[e[24]||(e[24]=r("span",null,"素材形状",-1)),a(rl,{placement:"top",effect:"dark",content:x(De),"raw-content":""},{default:o(()=>[a(i,{class:"shape-tip-icon"},{default:o(()=>[a(x(wl))]),_:1})]),_:1},8,["content"])]),default:o(()=>[a(ke,{modelValue:b.shape,"onUpdate:modelValue":e[3]||(e[3]=n=>b.shape=n),placeholder:"全部",clearable:"",class:"filter-select"},{default:o(()=>[(F(),Q($e,null,ze(Me,n=>a(we,{key:n,label:n,value:n},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),a(k,{label:"格式"},{default:o(()=>[a(ke,{modelValue:b.format,"onUpdate:modelValue":e[4]||(e[4]=n=>b.format=n),placeholder:"全部",clearable:"",filterable:"",class:"filter-select"},{default:o(()=>[(F(!0),Q($e,null,ze(se.value,n=>(F(),re(we,{key:n,label:n,value:n},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(k,null,{default:o(()=>[a(t,{type:"primary",onClick:te},{default:o(()=>[...e[25]||(e[25]=[f("查询",-1)])]),_:1}),a(t,{onClick:Pe},{default:o(()=>[...e[26]||(e[26]=[f("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"]),r("div",Bl,[a(t,{type:"primary",onClick:Ke},{default:o(()=>[a(i,null,{default:o(()=>[a(x(Se))]),_:1}),e[27]||(e[27]=f(" 上传 ",-1))]),_:1})])]),C.value.length?(F(),Q("div",Rl,[r("div",Il,[a(dl,{"model-value":fe.value,indeterminate:Ie.value,onChange:Ge},{default:o(()=>[f(" 全部文件 ("+y(C.value.length)+") ",1)]),_:1},8,["model-value","indeterminate"]),r("span",El,"已选 "+y(v.value.length)+" 项",1),a(t,{text:"",type:"primary",size:"small",onClick:oe,disabled:!v.value.length},{default:o(()=>[...e[28]||(e[28]=[f(" 清空已选 ",-1)])]),_:1},8,["disabled"])]),r("div",Ll,[a(t,{size:"small",onClick:el,disabled:!v.value.length},{default:o(()=>[...e[29]||(e[29]=[f("移动到",-1)])]),_:1},8,["disabled"]),a(t,{size:"small",type:"danger",plain:"",disabled:!v.value.length,onClick:Je},{default:o(()=>[...e[30]||(e[30]=[f(" 批量删除 ",-1)])]),_:1},8,["disabled"])])])):bl("",!0),Ce((F(),re(ul,{ref_key:"materialsTableRef",ref:Z,data:C.value,border:"",size:"small",class:"materials-table",onSelectionChange:Qe},{default:o(()=>[a(S,{type:"selection",width:"48"}),a(S,{label:"素材","min-width":"200"},{default:o(({row:n})=>[r("div",Pl,[r("div",jl,[a(sl,{src:Ye(n),fit:"cover","preview-src-list":Ze(n),"preview-teleported":!0},{error:o(()=>[...e[31]||(e[31]=[r("div",{class:"material-thumb__placeholder"},"无预览",-1)])]),_:1},8,["src","preview-src-list"])]),r("div",Al,[r("div",Kl,"编号："+y(n.code||"-"),1),r("div",Nl,"文件名："+y(n.file_name||"-"),1),r("div",Ol,"标题："+y(n.title||"-"),1)])])]),_:1}),a(S,{label:"素材规格","min-width":"80"},{default:o(({row:n})=>[r("div",ql,[r("div",null,"尺寸："+y(nl(n)||"-"),1),r("div",null,"格式："+y((n.format||"-").toUpperCase()),1),r("div",null,"大小："+y(il(n.file_size)),1)])]),_:1}),a(S,{prop:"order_count",label:"订单数",width:"90"}),a(S,{label:"创建人",width:"150"},{default:o(({row:n})=>[r("div",null,y(n.created_by_name||n.created_by||"-"),1),r("div",null,y(ye(n.created_at)),1)]),_:1}),a(S,{label:"更新人",width:"150"},{default:o(({row:n})=>[r("div",null,y(n.updated_by_name||n.updated_by||"-"),1),r("div",null,y(ye(n.updated_at)),1)]),_:1}),a(S,{label:"操作",fixed:"right",width:"220"},{default:o(({row:n})=>[a(t,{size:"small",text:"",type:"primary",onClick:xe=>al(n),disabled:!n.download_url&&!n.file_path},{default:o(()=>[a(i,null,{default:o(()=>[a(x(kl))]),_:1}),e[32]||(e[32]=f(" 下载 ",-1))]),_:1},8,["onClick","disabled"]),a(t,{size:"small",text:"",type:"primary",onClick:xe=>_e(n)},{default:o(()=>[a(i,null,{default:o(()=>[a(x(Vl))]),_:1}),e[33]||(e[33]=f(" 编辑 ",-1))]),_:1},8,["onClick"]),a(t,{size:"small",text:"",type:"danger",onClick:xe=>He(n)},{default:o(()=>[a(i,null,{default:o(()=>[a(x(xl))]),_:1}),e[34]||(e[34]=f(" 删除 ",-1))]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[Ve,Y.value]]),r("div",Wl,[a(fl,{background:"",layout:"prev, pager, next, sizes, total","current-page":h.page,"page-size":h.pageSize,"page-sizes":[10,20,50,100],total:h.total,onCurrentChange:je,onSizeChange:Ae},null,8,["current-page","page-size","total"])])]),_:1})]),_:1})]),_:1}),a(H,{modelValue:R.value,"onUpdate:modelValue":e[7]||(e[7]=n=>R.value=n),title:"上传素材",width:"520px"},{footer:o(()=>[a(t,{onClick:e[6]||(e[6]=n=>R.value=!1)},{default:o(()=>[...e[37]||(e[37]=[f("取消",-1)])]),_:1}),a(t,{type:"primary",loading:ee.value,onClick:qe},{default:o(()=>[...e[38]||(e[38]=[f("开始上传",-1)])]),_:1},8,["loading"])]),default:o(()=>[a(K,{model:p,ref_key:"uploadFormRef",ref:Te,"label-width":"100px",class:"upload-form"},{default:o(()=>[a(k,{label:"素材文件",required:""},{default:o(()=>[a(pl,{class:"upload-block",drag:"",action:"#","auto-upload":!1,"show-file-list":!0,multiple:!0,limit:10,accept:"image/*","before-upload":Ne,"on-change":Oe,"file-list":N.value},{default:o(()=>[a(i,{class:"upload-icon"},{default:o(()=>[a(x(Se))]),_:1}),e[35]||(e[35]=r("div",{class:"upload-text"},"将文件拖到此处或点击上传",-1)),e[36]||(e[36]=r("div",{class:"el-upload__tip"},"只支持图片，可一次上传多个文件",-1))]),_:1},8,["file-list"])]),_:1}),a(k,{label:"归属文件夹"},{default:o(()=>[a(W,{modelValue:p.folder_id,"onUpdate:modelValue":e[5]||(e[5]=n=>p.folder_id=n),data:O.value,props:{children:"children",label:"label",value:"value"},"check-strictly":"",clearable:"",placeholder:"请选择文件夹",class:"folder-select"},null,8,["modelValue","data"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),a(H,{modelValue:I.value,"onUpdate:modelValue":e[10]||(e[10]=n=>I.value=n),title:"移动素材",width:"420px"},{footer:o(()=>[a(t,{onClick:e[9]||(e[9]=n=>I.value=!1)},{default:o(()=>[...e[39]||(e[39]=[f("取消",-1)])]),_:1}),a(t,{type:"primary",onClick:ll},{default:o(()=>[...e[40]||(e[40]=[f("确定",-1)])]),_:1})]),default:o(()=>[a(K,{model:E,"label-width":"100px"},{default:o(()=>[a(k,{label:"目标文件夹"},{default:o(()=>[a(W,{modelValue:E.folder_id,"onUpdate:modelValue":e[8]||(e[8]=n=>E.folder_id=n),data:O.value,props:{children:"children",label:"label",value:"value"},"check-strictly":"",clearable:"",placeholder:"请选择目标文件夹",class:"folder-select"},null,8,["modelValue","data"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),a(H,{modelValue:L.value,"onUpdate:modelValue":e[14]||(e[14]=n=>L.value=n),title:Ee.value,width:"560px"},{footer:o(()=>[a(t,{onClick:e[13]||(e[13]=n=>L.value=!1)},{default:o(()=>[...e[41]||(e[41]=[f("取消",-1)])]),_:1}),a(t,{type:"primary",loading:le.value,onClick:We},{default:o(()=>[...e[42]||(e[42]=[f("保存",-1)])]),_:1},8,["loading"])]),default:o(()=>[a(K,{model:d,ref_key:"materialFormRef",ref:Re,"label-width":"110px",class:"material-form"},{default:o(()=>[a(k,{label:"标题"},{default:o(()=>[a(ne,{modelValue:d.title,"onUpdate:modelValue":e[11]||(e[11]=n=>d.title=n),placeholder:"请输入标题"},null,8,["modelValue"])]),_:1}),a(k,{label:"归属文件夹"},{default:o(()=>[a(W,{modelValue:d.folder_id,"onUpdate:modelValue":e[12]||(e[12]=n=>d.folder_id=n),data:O.value,props:{children:"children",label:"label",value:"value"},"check-strictly":"",clearable:"",placeholder:"请选择文件夹",class:"folder-select"},null,8,["modelValue","data"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),a(H,{modelValue:P.value,"onUpdate:modelValue":e[18]||(e[18]=n=>P.value=n),title:j.value==="create"?"新建文件夹":"重命名文件夹",width:"400px"},{footer:o(()=>[a(t,{onClick:e[17]||(e[17]=n=>P.value=!1)},{default:o(()=>[...e[43]||(e[43]=[f("取消",-1)])]),_:1}),a(t,{type:"primary",loading:ae.value,onClick:tl},{default:o(()=>[...e[44]||(e[44]=[f("确定",-1)])]),_:1},8,["loading"])]),default:o(()=>[a(K,{model:m,ref_key:"folderFormRef",ref:ue,"label-width":"90px",class:"folder-form"},{default:o(()=>[a(k,{label:"文件夹名",rules:[{required:!0,message:"请输入文件夹名",trigger:"blur"}],prop:"name"},{default:o(()=>[a(ne,{modelValue:m.name,"onUpdate:modelValue":e[15]||(e[15]=n=>m.name=n),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),a(k,{label:"上级文件夹"},{default:o(()=>[a(W,{modelValue:m.parent_id,"onUpdate:modelValue":e[16]||(e[16]=n=>m.parent_id=n),data:O.value,props:{children:"children",label:"label",value:"value"},"check-strictly":"",clearable:"",placeholder:"请选择上级文件夹",class:"folder-select"},null,8,["modelValue","data"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},Zl=$l(Ql,[["__scopeId","data-v-e2485962"]]);export{Zl as default};
