import{u as na,b as Xe,r as _,c as ie,m as ra,d as V,o as c,e as r,f as t,g as o,h as k,H as $,E as x,a2 as ia,Q as L,R as P,k as y,M as we,p as g,J as E,K as D,ad as Ze,ab as Te,t as p,A as ua,ae as da,a5 as pa,O as ca,a8 as el,j as _a,a3 as ll,a4 as ma}from"./index-BI8oO-SX.js";import{f as al}from"./date-B59vURDm.js";import{_ as fa}from"./_plugin-vue_export-helper-DlAUqK2U.js";const va={class:"orders-page"},ba={class:"table-container"},ya={class:"material-cell"},ga={class:"cell-title"},ha={class:"cell-sub"},ka={class:"cell-sub"},xa={class:"cell-sub"},Ca={class:"cell-sub"},za={class:"cell-sub"},Sa={key:0,class:"cell-sub"},Va={class:"cell-sub"},Ua={class:"cell-title"},Fa={class:"cell-sub"},wa={class:"cell-sub"},Ta={class:"cell-sub"},Ra={class:"cell-sub"},La={class:"cell-sub"},$a={class:"cell-sub"},Da={class:"cell-sub"},Pa={class:"shipping-label-cell"},Ka={class:"operation-actions"},Na={class:"table-pagination"},Oa={class:"table-container"},Ea={class:"material-cell"},Ma={class:"cell-title"},Ia={class:"cell-sub"},qa={class:"cell-sub"},Ba={class:"cell-sub"},Aa={class:"cell-sub"},ja={class:"cell-sub"},Ga={key:0,class:"cell-sub"},Ya={class:"cell-title"},Ha={class:"cell-sub"},Ja={class:"cell-sub"},Qa={class:"cell-sub"},Wa={class:"cell-sub"},Xa={class:"cell-sub"},Za={class:"cell-sub"},et={class:"cell-sub"},lt={class:"operation-actions"},at={class:"table-pagination"},tt={key:0,class:"batch-upload-result"},ot={class:"upload-text"},st={class:"upload-text"},nt={class:"material-selector-toolbar"},rt={key:1},it={class:"material-selector-info"},ut={class:"selector-code"},dt={class:"selector-title"},pt={class:"material-selector-spec"},ct={class:"material-selector-pagination"},_t=".pdf,image/*",mt={__name:"Orders",setup(ft){const tl=na(),ol=["默认地址","在【系统参数】修改"],ee=l=>{if(!l)return"-";const e=String(l);return ol.some(s=>e.includes(s))?"-":e},ue=l=>{if(l==null||l==="")return"-";const e=Number(l);return Number.isNaN(e)?l:e.toFixed(2)},Re=l=>l?al(l):"-",sl=l=>{if(!l)return"-";if(l.dimensions)return l.dimensions;const e=l.width||l.material_width||l.image_width||0,s=l.height||l.material_height||l.image_height||0;return e&&s?`${e} × ${s}`:"-"},de=[{label:"GSP订单号",value:"gsp_order_no"},{label:"发货仓库",value:"shipping_warehouse_code"},{label:"店铺编号",value:"shop_code"},{label:"负责人",value:"owner_name"},{label:"商品名称",value:"product_name"},{label:"规格",value:"spec"},{label:"货号",value:"item_no"},{label:"卖家SKU",value:"seller_sku"},{label:"平台SKU",value:"platform_sku"},{label:"平台SKC",value:"platform_skc"},{label:"平台SPU",value:"platform_spu"},{label:"特殊产品备注",value:"special_product_note"},{label:"币种",value:"currency_code"},{label:"邮编",value:"postal_code"},{label:"国家",value:"country"},{label:"省份",value:"province"},{label:"城市",value:"city"},{label:"区",value:"district"},{label:"用户地址1",value:"address_line1"},{label:"用户地址2",value:"address_line2"},{label:"用户全称",value:"customer_full_name"},{label:"用户姓氏",value:"customer_last_name"},{label:"用户名字",value:"customer_first_name"},{label:"手机号",value:"phone_number"},{label:"用户邮箱",value:"email"},{label:"税号",value:"tax_number"}],pe=[{label:"商品价格",value:"product_price"},{label:"商品预计收入",value:"expected_revenue"},{label:"应履约件数",value:"expected_fulfillment_qty"}],u=Xe({timeField:"",timeRange:[],exactField:"",exactValue:"",fuzzyField:"",fuzzyKeyword:""}),nl=[{label:"订单创建时间",value:"order_created_at"},{label:"完成时间",value:"completed_at"},{label:"支付时间",value:"payment_time"},{label:"要求签收时间",value:"required_sign_at"}],le=(l,e)=>{const s=l.find(d=>d.value===e);return s?s.label:""},Le=l=>{const e=[l.country,l.province,l.city,l.district].filter(Boolean);return e.length?e.join(" / "):""},rl=l=>l?String(l).toLowerCase()==="local":!0,ce=(l,e)=>{if(!l)return"";if(rl(e)){const s=tl.token;if(s){const d=l.includes("?")?"&":"?";return`${l}${d}token=${encodeURIComponent(s)}`}}return l},_e=l=>ce(l.material_image_url,l.material_storage),$e=l=>{const e=_e(l);return e?[e]:[]},il=l=>ce(l.shipping_label_url,l.shipping_label_storage),U=_("platform"),ae=_(!1),De=_([]),Pe=_([]),K=_(1),G=_(10),Ke=_(0),N=_(1),Y=_(10),Ne=_(0),me=_(!1),B=_(null),M=_(!1),ul=_(null),S=_({orderId:null,fileType:"material_image",orderNo:""}),O=_([]),fe=_(!1),H=_(!1),te=_(!1),A=_(""),oe=_([]),j=_(1),ve=_(10),Oe=_(0),I=_(null),J=_(null),Ee=_(null),be=l=>{if(!l)return"";let e=l.preview_url||l.download_url;return!e&&l.id&&(e=`/api/materials/${l.id}/download?disposition=inline`),ce(e,l.storage)},dl=l=>{const e=be(l);return e?[e]:[]},se=_(!1),q=_([]),ye=_(!1),w=_({success:[],failed:[]}),pl=ie(()=>S.value.fileType==="shipping_label"?"上传面单文件":S.value.fileType==="import"?"导入订单 Excel":"上传素材图"),Me=ie(()=>S.value.fileType==="shipping_label"?"application/pdf":S.value.fileType==="import"?".xlsx,.xls":"image/*"),Ie=ie(()=>S.value.fileType==="shipping_label"?"仅支持 PDF 格式文件":S.value.fileType==="import"?"请上传 Excel 文件（.xlsx）":"支持常见图片格式（JPG/PNG）"),cl=[{label:"平台面单",value:"platform"},{label:"工厂物流",value:"factory"}],ge=_([]),_l=ie(()=>{const l={};return ge.value.forEach(e=>{const s=String(e.value);l[s]=e.label}),l}),he=l=>{if(l==null||l==="")return"";const e=String(l);return _l.value[e]||""},ml=l=>l.optionsKey==="orderType"?cl:l.optionsKey==="status"?ge.value:l.options||[],fl=async()=>{var l,e,s;try{const h=((l=(await $.get("/dict/order_status")).data)==null?void 0:l.items)||[];ge.value=h.map(m=>{const C=Number(m.value),i=Number.isNaN(C)?m.value:C;return{label:m.label,value:i}})}catch(d){x.error(((s=(e=d.response)==null?void 0:e.data)==null?void 0:s.error)||"加载订单状态失败")}},ke={gsp_order_no:"",order_type:"platform",order_created_at:"",status:0,payment_time:"",completed_at:"",required_sign_at:"",shipping_warehouse_code:"",shop_code:"",product_id:"",owner_name:"",product_name:"",spec:"",item_no:"",seller_sku:"",platform_sku:"",platform_skc:"",platform_spu:"",product_price:null,expected_revenue:null,special_product_note:"",currency_code:"",expected_fulfillment_qty:null,item_count:null,postal_code:"",country:"",province:"",city:"",district:"",address_line1:"",address_line2:"",customer_full_name:"",customer_last_name:"",customer_first_name:"",phone_number:"",email:"",tax_number:""},vl=Object.keys(ke),bl=["status","expected_fulfillment_qty","item_count"],yl=["product_price","expected_revenue"],gl=["order_created_at","payment_time","completed_at","required_sign_at"],hl=[{label:"基础信息",fields:[{prop:"gsp_order_no",label:"GSP订单号",span:12},{prop:"order_type",label:"订单类型",span:12,type:"select",optionsKey:"orderType"},{prop:"order_created_at",label:"订单创建时间",span:12},{prop:"status",label:"状态",span:12,type:"select",optionsKey:"status"},{prop:"payment_time",label:"支付时间",span:12},{prop:"completed_at",label:"完成时间",span:12},{prop:"required_sign_at",label:"要求签收时间",span:12},{prop:"shipping_warehouse_code",label:"发货仓库",span:12},{prop:"shop_code",label:"店铺编号",span:12},{prop:"product_id",label:"商品ID",span:12},{prop:"owner_name",label:"负责人",span:12}]},{label:"商品信息",fields:[{prop:"product_name",label:"商品名称",span:12},{prop:"spec",label:"规格",span:12},{prop:"item_no",label:"货号",span:12},{prop:"seller_sku",label:"卖家SKU",span:12},{prop:"platform_sku",label:"平台SKU",span:12},{prop:"platform_skc",label:"平台SKC",span:12},{prop:"platform_spu",label:"平台SPU",span:12},{prop:"product_price",label:"商品价格",span:12,type:"float"},{prop:"expected_revenue",label:"商品预计收入",span:12,type:"float"},{prop:"expected_fulfillment_qty",label:"应履约件数",span:12,type:"int"},{prop:"item_count",label:"件数",span:12,type:"int",optional:!0},{prop:"currency_code",label:"币种",span:12},{prop:"special_product_note",label:"特殊产品备注",span:24,type:"textarea",optional:!0}]},{label:"收货信息",fields:[{prop:"postal_code",label:"邮编",span:12},{prop:"country",label:"国家",span:12},{prop:"province",label:"省份",span:12},{prop:"city",label:"城市",span:12},{prop:"district",label:"区",span:12},{prop:"address_line1",label:"用户地址1",span:24},{prop:"address_line2",label:"用户地址2",span:24,optional:!0}]},{label:"联系人信息",fields:[{prop:"customer_full_name",label:"用户全称",span:12},{prop:"customer_last_name",label:"用户姓氏",span:12},{prop:"customer_first_name",label:"用户名字",span:12},{prop:"phone_number",label:"手机号",span:12},{prop:"email",label:"用户邮箱",span:12},{prop:"tax_number",label:"税号",span:12,optional:!0}]}],Q=_(!1),kl=_(null),xe=_(!1),ne=_(null),n=Xe({...ke}),xl=l=>{const e=il(l);if(!(l!=null&&l.shipping_label_url)||!e){x.warning("暂无面单文件，可点击 + 上传");return}window.open(e,"_blank")},Ce=(l,e)=>{if(e==="material_image"){jl(l);return}S.value={orderId:l.id,fileType:e,orderNo:l.gsp_order_no||""},O.value=[],M.value=!0},qe=(l,e)=>{e.length>1&&e.splice(0,e.length-1),O.value=e},Be=(l,e)=>{O.value=e},Cl=()=>{O.value=[],S.value={orderId:null,fileType:"material_image",orderNo:""}},zl=async()=>{var e,s,d;if(!O.value.length){x.warning("请选择要上传的文件");return}if(S.value.fileType!=="import"&&!S.value.orderId){x.error("未找到订单信息，无法上传");return}const l=new FormData;l.append("file",O.value[0].raw),S.value.fileType!=="import"&&l.append("file_type",S.value.fileType),fe.value=!0;try{if(S.value.fileType==="import"){const h=await $.post("/orders/import",l,{headers:{"Content-Type":"multipart/form-data"}});x.success(((e=h.data)==null?void 0:e.message)||"导入成功"),M.value=!1;const m=U.value;await v(m),m==="platform"?await v("factory",{setLoading:!1}):await v("platform",{setLoading:!1})}else{await $.post(`/orders/${S.value.orderId}/attachments`,l,{headers:{"Content-Type":"multipart/form-data"}}),x.success("上传成功"),M.value=!1;const h=U.value;await v(h),h==="platform"?await v("factory",{setLoading:!1}):await v("platform",{setLoading:!1})}}catch(h){x.error(((d=(s=h.response)==null?void 0:s.data)==null?void 0:d.error)||"上传失败")}finally{fe.value=!1}},Sl=()=>{se.value=!0,q.value=[],w.value={success:[],failed:[]}},Vl=(l,e)=>{q.value=[...e]},Ul=(l,e)=>{q.value=[...e]},Fl=()=>{q.value=[],w.value={success:[],failed:[]}},wl=async()=>{var e,s,d,h,m,C;if(!q.value.length){x.warning("请选择要上传的文件");return}const l=new FormData;if(q.value.forEach(i=>{i!=null&&i.raw&&l.append("files",i.raw)}),!l.has("files")){x.warning("没有有效的文件可上传");return}ye.value=!0;try{const i=await $.post("/orders/batch-attachments",l,{headers:{"Content-Type":"multipart/form-data"}}),T=((e=i.data)==null?void 0:e.data)||{};w.value={success:T.success||[],failed:T.failed||[]};const z=w.value.failed.map(Z=>Z.file_name).join(", ");let F=((s=i.data)==null?void 0:s.message)||`成功 ${w.value.success.length} 个，失败 ${w.value.failed.length} 个`;w.value.failed.length&&(F=`${F}。未匹配的文件：${z}`),x.success(F);const b=U.value;await v(b),b==="platform"?await v("factory",{setLoading:!1}):await v("platform",{setLoading:!1})}catch(i){const T=(h=(d=i.response)==null?void 0:d.data)==null?void 0:h.data;T&&(w.value={success:T.success||[],failed:T.failed||[]});const z=w.value.failed.map(b=>b.file_name);let F=((C=(m=i.response)==null?void 0:m.data)==null?void 0:C.error)||"批量上传失败";z.length&&(F=`${F}。未匹配的文件：${z.join(", ")}`),x.error(F)}finally{ye.value=!1}},ze=async(l,e)=>{var d,h;const s=e==="material_image"?l.material_attachment_id:l.shipping_label_attachment_id;if(!s){x.warning("暂无可删除的附件");return}try{await ll.confirm("确认删除该附件吗？","提示",{type:"warning"}),await $.delete(`/orders/${l.id}/attachments/${s}`),x.success("删除成功");const m=U.value;await v(m),m==="platform"?await v("factory",{setLoading:!1}):await v("platform",{setLoading:!1})}catch(m){m!=="cancel"&&x.error(((h=(d=m.response)==null?void 0:d.data)==null?void 0:h.error)||"删除失败")}},Ae=()=>{Object.assign(n,{...ke})},Tl=l=>{vl.forEach(e=>{const s=l==null?void 0:l[e];if(gl.includes(e))n[e]=s?al(s):"";else if(yl.includes(e)||bl.includes(e)){const d=s==null?null:Number(s);n[e]=Number.isNaN(d)?null:d}else n[e]=s==null?"":String(s)}),n.order_type||(n.order_type=(l==null?void 0:l.order_type)||(U.value==="factory"?"factory":"platform")),(n.status===null||Number.isNaN(n.status))&&(n.status=typeof(l==null?void 0:l.status)=="number"?l.status:0)},W=l=>{if(l==null)return null;const e=String(l).trim();return e===""?null:e},Rl=()=>({gsp_order_no:n.gsp_order_no.trim(),order_type:n.order_type,order_created_at:n.order_created_at.trim(),status:n.status===null?null:Math.trunc(n.status),payment_time:W(n.payment_time),completed_at:W(n.completed_at),shipping_warehouse_code:n.shipping_warehouse_code.trim(),required_sign_at:W(n.required_sign_at),shop_code:n.shop_code.trim(),product_id:n.product_id.trim(),owner_name:n.owner_name.trim(),product_name:n.product_name.trim(),spec:n.spec.trim(),item_no:n.item_no.trim(),seller_sku:n.seller_sku.trim(),platform_sku:n.platform_sku.trim(),platform_skc:n.platform_skc.trim(),platform_spu:n.platform_spu.trim(),product_price:n.product_price===null?null:Number(n.product_price),expected_revenue:n.expected_revenue===null?null:Number(n.expected_revenue),special_product_note:W(n.special_product_note),currency_code:n.currency_code.trim(),expected_fulfillment_qty:n.expected_fulfillment_qty===null?null:Math.trunc(n.expected_fulfillment_qty),item_count:n.item_count===null||n.item_count===""?null:Math.trunc(n.item_count),postal_code:n.postal_code.trim(),country:n.country.trim(),province:n.province.trim(),city:n.city.trim(),district:n.district.trim(),address_line1:n.address_line1.trim(),address_line2:n.address_line2.trim(),customer_full_name:n.customer_full_name.trim(),customer_last_name:n.customer_last_name.trim(),customer_first_name:n.customer_first_name.trim(),phone_number:n.phone_number.trim(),email:n.email.trim(),tax_number:W(n.tax_number)}),je=l=>{Ae(),Tl(l),ne.value=l.id,Q.value=!0},Ll=()=>{Ae(),ne.value=null},$l=async()=>{var e,s;if(!ne.value)return;const l=Rl();l.order_type||(l.order_type=U.value==="factory"?"factory":"platform"),xe.value=!0;try{await $.put(`/orders/${ne.value}`,l),x.success("更新成功"),Q.value=!1;const d=U.value;await v(d),d==="platform"?await v("factory",{setLoading:!1}):await v("platform",{setLoading:!1})}catch(d){x.error(((s=(e=d.response)==null?void 0:e.data)==null?void 0:s.error)||"更新失败")}finally{xe.value=!1}},Ge=async l=>{var e,s;try{await ll.confirm("确认删除该订单吗？删除后无法恢复。","提示",{type:"warning"}),await $.delete(`/orders/${l.id}`),x.success("删除成功");const d=U.value;await v(d),d==="platform"?await v("factory",{setLoading:!1}):await v("platform",{setLoading:!1})}catch(d){d!=="cancel"&&x.error(((s=(e=d.response)==null?void 0:e.data)==null?void 0:s.error)||"删除失败")}},Dl=l=>{if(!l)return"-";try{const e=decodeURIComponent(l.split("?")[0]);return e.substring(e.lastIndexOf("/")+1)}catch{return l}},Pl=[{label:"GSP订单号",prop:"gsp_order_no"},{label:"订单创建时间",prop:"order_created_at",type:"time"},{label:"订单状态",prop:"status",type:"statusTag"},{label:"发货仓库",prop:"shipping_warehouse_code"},{label:"店铺编号",prop:"shop_code"},{label:"负责人",prop:"owner_name"},{label:"商品名称",prop:"product_name"},{label:"规格",prop:"spec"},{label:"货号",prop:"item_no"},{label:"卖家SKU",prop:"seller_sku"},{label:"平台SKU",prop:"platform_sku"},{label:"平台SKC",prop:"platform_skc"},{label:"平台SPU",prop:"platform_spu"},{label:"商品价格",prop:"product_price",type:"currency"},{label:"商品预计收入",prop:"expected_revenue",type:"currency"},{label:"特殊产品备注",prop:"special_product_note"},{label:"币种",prop:"currency_code"},{label:"应履约件数",prop:"expected_fulfillment_qty"},{label:"邮编",prop:"postal_code"},{label:"国家",prop:"country"},{label:"省份",prop:"province"},{label:"城市",prop:"city"},{label:"区",prop:"district"},{label:"用户地址1",prop:"address_line1"},{label:"用户地址2",prop:"address_line2"},{label:"用户全称",prop:"customer_full_name"},{label:"用户姓氏",prop:"customer_last_name"},{label:"用户名字",prop:"customer_first_name"},{label:"手机号",prop:"phone_number"},{label:"用户邮箱",prop:"email"},{label:"税号",prop:"tax_number"},{label:"支付时间",prop:"payment_time",type:"time"},{label:"完成时间",prop:"completed_at",type:"time"},{label:"要求签收时间",prop:"required_sign_at",type:"time"}],Ye=(l,e)=>{const s=e[l.prop];return s==null||s===""?"-":l.type==="statusTag"?he(s)||s:l.type==="currency"?ue(s):l.type==="time"?Re(s):s},v=async(l=U.value,e={})=>{var d,h,m;const s=e.setLoading!==!1;s&&(ae.value=!0);try{const C=l==="factory",i={tab:l};i.order_type=C?"factory":"platform",i.page=C?N.value:K.value,i.page_size=C?Y.value:G.value,u.timeField&&u.timeRange.length===2&&(i.time_field=u.timeField,i.time_start=u.timeRange[0],i.time_end=u.timeRange[1]),u.exactField&&u.exactValue!==""&&u.exactValue!==null&&(i.exact_field=u.exactField,i.exact_value=u.exactValue),u.fuzzyField&&u.fuzzyKeyword&&(i.fuzzy_field=u.fuzzyField,i.fuzzy_keyword=u.fuzzyKeyword);const z=((d=(await $.get("/orders",{params:i})).data)==null?void 0:d.data)||{},F=z.orders||[],b=Number(z.total||0);C?(Pe.value=F,Ne.value=b,typeof z.page=="number"&&(N.value=z.page),typeof z.page_size=="number"&&(Y.value=z.page_size)):(De.value=F,Ke.value=b,typeof z.page=="number"&&(K.value=z.page),typeof z.page_size=="number"&&(G.value=z.page_size))}catch(C){x.error(((m=(h=C.response)==null?void 0:h.data)==null?void 0:m.error)||"加载订单数据失败")}finally{s&&(ae.value=!1)}},Kl=l=>{K.value=l,U.value==="platform"&&v("platform")},Nl=l=>{G.value=l,K.value=1,U.value==="platform"&&v("platform")},Ol=l=>{N.value=l,U.value==="factory"&&v("factory")},El=l=>{Y.value=l,N.value=1,U.value==="factory"&&v("factory")},Ml=()=>{v(U.value)},Il=()=>{U.value==="factory"?(N.value=1,v("factory")):(K.value=1,v("platform"))},ql=()=>{u.timeField="",u.timeRange=[],u.exactField="",u.exactValue="",u.fuzzyField="",u.fuzzyKeyword="",K.value=1,N.value=1,v(U.value)},Bl=()=>{S.value={orderId:null,fileType:"import",orderNo:""},M.value=!0},Al=async()=>{var l,e;try{const s={};u.timeField&&u.timeRange.length===2&&(s.time_field=u.timeField,s.time_start=u.timeRange[0],s.time_end=u.timeRange[1]),u.exactField&&u.exactValue!==""&&u.exactValue!==null&&(s.exact_field=u.exactField,s.exact_value=u.exactValue),u.fuzzyField&&u.fuzzyKeyword&&(s.fuzzy_field=u.fuzzyField,s.fuzzy_keyword=u.fuzzyKeyword);const d=await $.get("/orders/export",{params:s,responseType:"blob"}),h=new Blob([d.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),m=window.URL.createObjectURL(h),C=document.createElement("a");C.href=m;const i=`orders_all_${Date.now()}.xlsx`;C.setAttribute("download",i),document.body.appendChild(C),C.click(),document.body.removeChild(C),window.URL.revokeObjectURL(m),x.success("导出成功")}catch(s){x.error(((e=(l=s.response)==null?void 0:l.data)==null?void 0:e.error)||"导出失败")}},He=l=>{B.value={...l},me.value=!0},jl=l=>{J.value=l,I.value=null,H.value=!0,A.value=l.item_no||"",j.value=1,X()},X=async()=>{var l,e,s;te.value=!0;try{const d={page:j.value,page_size:ve.value};A.value&&(d.keyword=A.value);const m=((l=(await $.get("/materials",{params:d})).data)==null?void 0:l.data)||{};oe.value=m.materials||[],Oe.value=m.total||0,await ma(()=>{var T;const C=Ee.value;if(!C)return;C.setCurrentRow();const i=(T=J.value)==null?void 0:T.material_asset_id;if(i){const z=oe.value.find(F=>F.id===i);z&&(I.value=z,C.setCurrentRow(z))}})}catch(d){x.error(((s=(e=d.response)==null?void 0:e.data)==null?void 0:s.error)||"加载素材失败")}finally{te.value=!1}},Se=()=>{j.value=1,X()},Gl=l=>{j.value=l,X()},Yl=l=>{ve.value=l,j.value=1,X()},Hl=l=>{I.value=l},Jl=()=>{J.value=null,I.value=null,A.value="",oe.value=[]},Ql=async()=>{var l,e,s;if(!((l=J.value)!=null&&l.id)){x.error("未找到订单信息");return}if(!I.value){x.warning("请选择素材");return}try{await $.post(`/orders/${J.value.id}/attachments/link`,{material_id:I.value.id,file_type:"material_image"}),x.success("已关联素材"),H.value=!1;const d=U.value;await v(d),d==="platform"?await v("factory",{setLoading:!1}):await v("platform",{setLoading:!1})}catch(d){x.error(((s=(e=d.response)==null?void 0:e.data)==null?void 0:s.error)||"关联素材失败")}};return ra(async()=>{await fl(),v()}),(l,e)=>{const s=k("el-option"),d=k("el-select"),h=k("el-input"),m=k("el-form-item"),C=k("el-date-picker"),i=k("el-button"),T=k("el-form"),z=k("el-image"),F=k("el-icon"),b=k("el-table-column"),Z=k("el-table"),Ve=k("el-pagination"),Je=k("el-tab-pane"),Wl=k("el-tabs"),Xl=k("el-tag"),Zl=k("el-descriptions-item"),ea=k("el-descriptions"),la=k("el-empty"),aa=k("el-drawer"),ta=k("el-divider"),Qe=k("el-input-number"),oa=k("el-col"),sa=k("el-row"),re=k("el-dialog"),Ue=k("el-upload"),We=k("el-alert"),Fe=ia("loading");return c(),V("div",va,[e[46]||(e[46]=r("div",{class:"page-header"},[r("h2",null,"订单管理")],-1)),t(T,{model:u,inline:"",class:"filter-form","label-width":"100px"},{default:o(()=>[t(m,{label:"模糊查询"},{default:o(()=>[t(d,{modelValue:u.fuzzyField,"onUpdate:modelValue":e[0]||(e[0]=a=>u.fuzzyField=a),placeholder:"选择字段",clearable:"",style:{width:"150px"}},{default:o(()=>[(c(),V(L,null,P(de,a=>t(s,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),t(h,{modelValue:u.fuzzyKeyword,"onUpdate:modelValue":e[1]||(e[1]=a=>u.fuzzyKeyword=a),placeholder:le(de,u.fuzzyField)?`请输入${le(de,u.fuzzyField)}`:"请输入关键词",disabled:!u.fuzzyField,clearable:"",style:{width:"220px","margin-left":"12px"}},null,8,["modelValue","placeholder","disabled"])]),_:1}),t(m,{label:"精确查询"},{default:o(()=>[t(d,{modelValue:u.exactField,"onUpdate:modelValue":e[2]||(e[2]=a=>u.exactField=a),placeholder:"选择字段",clearable:"",style:{width:"150px"}},{default:o(()=>[(c(),V(L,null,P(pe,a=>t(s,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),t(h,{modelValue:u.exactValue,"onUpdate:modelValue":e[3]||(e[3]=a=>u.exactValue=a),placeholder:le(pe,u.exactField)?`请输入${le(pe,u.exactField)}`:"请输入",disabled:!u.exactField,clearable:"",style:{width:"220px","margin-left":"12px"}},null,8,["modelValue","placeholder","disabled"]),t(m,{label:"时间范围"},{default:o(()=>[t(d,{modelValue:u.timeField,"onUpdate:modelValue":e[4]||(e[4]=a=>u.timeField=a),placeholder:"选择时间字段",clearable:"",style:{width:"180px"}},{default:o(()=>[(c(),V(L,null,P(nl,a=>t(s,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),t(C,{modelValue:u.timeRange,"onUpdate:modelValue":e[5]||(e[5]=a=>u.timeRange=a),type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",disabled:!u.timeField,style:{width:"360px","margin-left":"12px"},clearable:""},null,8,["modelValue","disabled"])]),_:1})]),_:1}),t(m,null,{default:o(()=>[t(i,{type:"primary",onClick:Il},{default:o(()=>[...e[21]||(e[21]=[y("查询",-1)])]),_:1}),t(i,{onClick:ql},{default:o(()=>[...e[22]||(e[22]=[y("重置",-1)])]),_:1})]),_:1}),t(m,{class:"filter-actions","label-width":"0"},{default:o(()=>[t(i,{type:"success",onClick:Bl},{default:o(()=>[...e[23]||(e[23]=[y("导入Excel",-1)])]),_:1}),t(i,{type:"info",plain:"",onClick:Sl},{default:o(()=>[...e[24]||(e[24]=[y("导入素材/面单",-1)])]),_:1}),t(i,{type:"warning",onClick:Al},{default:o(()=>[...e[25]||(e[25]=[y("导出Excel",-1)])]),_:1})]),_:1})]),_:1},8,["model"]),t(Wl,{modelValue:U.value,"onUpdate:modelValue":e[10]||(e[10]=a=>U.value=a),class:"order-tabs",onTabChange:Ml},{default:o(()=>[t(Je,{label:"平台面单",name:"platform"},{default:o(()=>[r("div",ba,[we((c(),g(Z,{data:De.value,border:"",style:{width:"100%"}},{default:o(()=>[t(b,{label:"素材图",width:"120",fixed:"left"},{default:o(({row:a})=>[r("div",ya,[a.material_image_url?(c(),g(z,{key:0,src:_e(a),fit:"cover","preview-src-list":$e(a),"preview-teleported":!0},null,8,["src","preview-src-list"])):(c(),g(i,{key:1,circle:"",class:"upload-button ghost",onClick:f=>Ce(a,"material_image")},{default:o(()=>[t(F,null,{default:o(()=>[t(D(Ze))]),_:1})]),_:1},8,["onClick"])),a.material_image_url?(c(),g(i,{key:2,type:"danger",circle:"",icon:D(Te),size:"small",class:"material-delete",onClick:f=>ze(a,"material_image")},null,8,["icon","onClick"])):E("",!0)])]),_:1}),t(b,{prop:"gsp_order_no",label:"GSP订单号",width:"160"}),t(b,{prop:"shipping_warehouse_code",label:"发货仓库",width:"110"}),t(b,{prop:"shop_code",label:"店铺编号",width:"140"}),t(b,{prop:"owner_name",label:"负责人",width:"110"}),t(b,{label:"商品信息","min-width":"280"},{default:o(({row:a})=>[r("div",ga,p(a.product_name||""),1),r("div",ha,"规格："+p(a.spec||"-")+"　货号："+p(a.item_no||"-"),1),r("div",ka,"卖家SKU："+p(a.seller_sku||"-"),1),r("div",xa,"平台SKU："+p(a.platform_sku||"-"),1),r("div",Ca,"SKC："+p(a.platform_skc||"-")+"　SPU："+p(a.platform_spu||"-"),1),r("div",za," 价格："+p(a.product_price!==null&&a.product_price!==void 0&&a.product_price!==""?`￥${ue(a.product_price)}`:"-"),1),a.special_product_note?(c(),V("div",Sa,"备注："+p(a.special_product_note),1)):E("",!0),r("div",Va,"应履约件数："+p(a.expected_fulfillment_qty??"-"),1)]),_:1}),t(b,{label:"收货信息","min-width":"340"},{default:o(({row:a})=>[r("div",Ua,p(a.customer_full_name),1),r("div",Fa,p(Le(a)),1),r("div",wa,"地址1："+p(ee(a.address_line1)),1),r("div",Ta,"地址2："+p(ee(a.address_line2)),1)]),_:1}),t(b,{label:"联系信息",width:"250"},{default:o(({row:a})=>[r("div",Ra,"电话："+p(a.phone_number||"-"),1),r("div",La,"邮箱："+p(a.email||"-"),1),r("div",$a,"税号："+p(a.tax_number||"-"),1),r("div",Da,"邮编："+p(a.postal_code||"-"),1)]),_:1}),t(b,{label:"面单",width:"280",fixed:"right"},{default:o(({row:a})=>[r("div",Pa,[a.shipping_label_url?(c(),g(i,{key:0,type:"primary",link:"",icon:D(ua),onClick:f=>xl(a)},{default:o(()=>[y(p(a.shipping_label_file_name||Dl(a.shipping_label_url)),1)]),_:2},1032,["icon","onClick"])):(c(),g(i,{key:1,circle:"",class:"upload-button ghost",onClick:f=>Ce(a,"shipping_label")},{default:o(()=>[t(F,null,{default:o(()=>[t(D(da))]),_:1})]),_:1},8,["onClick"])),a.shipping_label_url?(c(),g(i,{key:2,type:"danger",circle:"",icon:D(Te),size:"small",class:"material-delete",onClick:f=>ze(a,"shipping_label")},null,8,["icon","onClick"])):E("",!0)])]),_:1}),t(b,{label:"操作",fixed:"right",width:"200"},{default:o(({row:a})=>[r("div",Ka,[t(i,{type:"primary",link:"",onClick:f=>je(a)},{default:o(()=>[...e[26]||(e[26]=[y("编辑",-1)])]),_:1},8,["onClick"]),t(i,{type:"primary",link:"",onClick:f=>He(a)},{default:o(()=>[...e[27]||(e[27]=[y("查看",-1)])]),_:1},8,["onClick"]),t(i,{type:"danger",link:"",onClick:f=>Ge(a)},{default:o(()=>[...e[28]||(e[28]=[y("删除",-1)])]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["data"])),[[Fe,ae.value]])]),r("div",Na,[t(Ve,{"current-page":K.value,"onUpdate:currentPage":e[6]||(e[6]=a=>K.value=a),"page-size":G.value,"onUpdate:pageSize":e[7]||(e[7]=a=>G.value=a),total:Ke.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:Nl,onCurrentChange:Kl},null,8,["current-page","page-size","total"])])]),_:1}),t(Je,{label:"工厂物流",name:"factory"},{default:o(()=>[r("div",Oa,[we((c(),g(Z,{data:Pe.value,border:"",style:{width:"100%"}},{default:o(()=>[t(b,{label:"素材图",width:"120",fixed:"left"},{default:o(({row:a})=>[r("div",Ea,[a.material_image_url?(c(),g(z,{key:0,src:_e(a),fit:"cover","preview-src-list":$e(a),"preview-teleported":!0},null,8,["src","preview-src-list"])):(c(),g(i,{key:1,circle:"",class:"upload-button ghost",onClick:f=>Ce(a,"material_image")},{default:o(()=>[t(F,null,{default:o(()=>[t(D(Ze))]),_:1})]),_:1},8,["onClick"])),a.material_image_url?(c(),g(i,{key:2,type:"danger",circle:"",icon:D(Te),size:"small",class:"material-delete",onClick:f=>ze(a,"material_image")},null,8,["icon","onClick"])):E("",!0)])]),_:1}),t(b,{prop:"gsp_order_no",label:"GSP订单号",width:"160"}),t(b,{prop:"order_created_at",label:"订单创建时间",width:"180"},{default:o(({row:a})=>[y(p(Re(a.order_created_at)),1)]),_:1}),t(b,{prop:"shop_code",label:"店铺编号",width:"140"}),t(b,{prop:"owner_name",label:"负责人",width:"100"}),t(b,{label:"商品信息","min-width":"280"},{default:o(({row:a})=>[r("div",Ma,p(a.product_name||""),1),r("div",Ia,"规格："+p(a.spec||"-")+"　货号："+p(a.item_no||"-"),1),r("div",qa,"卖家SKU："+p(a.seller_sku||"-"),1),r("div",Ba,"平台SKU："+p(a.platform_sku||"-"),1),r("div",Aa,"SKC："+p(a.platform_skc||"-")+"　SPU："+p(a.platform_spu||"-"),1),r("div",ja,"价格：￥"+p(ue(a.product_price)),1),a.special_product_note?(c(),V("div",Ga,"备注："+p(a.special_product_note),1)):E("",!0)]),_:1}),t(b,{label:"收货信息","min-width":"250"},{default:o(({row:a})=>[r("div",Ya,p(a.customer_full_name),1),r("div",Ha,p(Le(a)),1),r("div",Ja,"地址1："+p(ee(a.address_line1)),1),r("div",Qa,"地址2："+p(ee(a.address_line2)),1)]),_:1}),t(b,{label:"联系信息",width:"220"},{default:o(({row:a})=>[r("div",Wa,"电话："+p(a.phone_number||"-"),1),r("div",Xa,"邮箱："+p(a.email||"-"),1),r("div",Za,"税号："+p(a.tax_number||"-"),1),r("div",et,"邮编："+p(a.postal_code||"-"),1)]),_:1}),t(b,{label:"操作",fixed:"right",width:"200"},{default:o(({row:a})=>[r("div",lt,[t(i,{type:"primary",link:"",onClick:f=>je(a)},{default:o(()=>[...e[29]||(e[29]=[y("编辑",-1)])]),_:1},8,["onClick"]),t(i,{type:"primary",link:"",onClick:f=>He(a)},{default:o(()=>[...e[30]||(e[30]=[y("查看",-1)])]),_:1},8,["onClick"]),t(i,{type:"danger",link:"",onClick:f=>Ge(a)},{default:o(()=>[...e[31]||(e[31]=[y("删除",-1)])]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["data"])),[[Fe,ae.value]])]),r("div",at,[t(Ve,{"current-page":N.value,"onUpdate:currentPage":e[8]||(e[8]=a=>N.value=a),"page-size":Y.value,"onUpdate:pageSize":e[9]||(e[9]=a=>Y.value=a),total:Ne.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:El,onCurrentChange:Ol},null,8,["current-page","page-size","total"])])]),_:1})]),_:1},8,["modelValue"]),t(aa,{modelValue:me.value,"onUpdate:modelValue":e[11]||(e[11]=a=>me.value=a),title:"订单详情",size:"50%","destroy-on-close":""},{default:o(()=>[B.value?(c(),g(ea,{key:0,column:2,border:""},{default:o(()=>[(c(),V(L,null,P(Pl,a=>t(Zl,{key:a.prop,label:a.label},{default:o(()=>[a.type==="statusTag"?(c(),V(L,{key:0},[he(B.value[a.prop])?(c(),g(Xl,{key:0,size:"small"},{default:o(()=>[y(p(he(B.value[a.prop])),1)]),_:2},1024)):(c(),V(L,{key:1},[y(p(Ye(a,B.value)),1)],64))],64)):(c(),V(L,{key:1},[y(p(Ye(a,B.value)),1)],64))]),_:2},1032,["label"])),64))]),_:1})):(c(),g(la,{key:1,description:"暂无数据"}))]),_:1},8,["modelValue"]),t(re,{modelValue:Q.value,"onUpdate:modelValue":e[13]||(e[13]=a=>Q.value=a),title:"编辑订单",width:"900px",class:"order-edit-dialog","close-on-click-modal":!1,onClosed:Ll},{footer:o(()=>[t(i,{onClick:e[12]||(e[12]=a=>Q.value=!1)},{default:o(()=>[...e[32]||(e[32]=[y("取消",-1)])]),_:1}),t(i,{type:"primary",loading:xe.value,onClick:$l},{default:o(()=>[...e[33]||(e[33]=[y("保存",-1)])]),_:1},8,["loading"])]),default:o(()=>[t(T,{ref_key:"editFormRef",ref:kl,model:n,"label-width":"120px",class:"order-edit-form"},{default:o(()=>[(c(),V(L,null,P(hl,a=>(c(),V(L,{key:a.label},[t(ta,{"content-position":"left"},{default:o(()=>[y(p(a.label),1)]),_:2},1024),t(sa,{gutter:16},{default:o(()=>[(c(!0),V(L,null,P(a.fields,f=>(c(),g(oa,{key:f.prop,span:f.span||12},{default:o(()=>[t(m,{label:f.label},{default:o(()=>[f.type==="select"?(c(),g(d,{key:0,modelValue:n[f.prop],"onUpdate:modelValue":R=>n[f.prop]=R,placeholder:"请选择",style:{width:"100%"}},{default:o(()=>[(c(!0),V(L,null,P(ml(f),R=>(c(),g(s,{key:String(R.value),label:R.label,value:R.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):f.type==="textarea"?(c(),g(h,{key:1,modelValue:n[f.prop],"onUpdate:modelValue":R=>n[f.prop]=R,type:"textarea",rows:3,placeholder:f.optional?"可选填写":""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):f.type==="float"?(c(),g(Qe,{key:2,modelValue:n[f.prop],"onUpdate:modelValue":R=>n[f.prop]=R,min:0,step:.01,precision:2,"controls-position":"right",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])):f.type==="int"?(c(),g(Qe,{key:3,modelValue:n[f.prop],"onUpdate:modelValue":R=>n[f.prop]=R,min:0,step:1,"controls-position":"right",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])):(c(),g(h,{key:4,modelValue:n[f.prop],"onUpdate:modelValue":R=>n[f.prop]=R,placeholder:f.optional?"可选填写":"",clearable:""},null,8,["modelValue","onUpdate:modelValue","placeholder"]))]),_:2},1032,["label"])]),_:2},1032,["span"]))),128))]),_:2},1024)],64))),64))]),_:1},8,["model"])]),_:1},8,["modelValue"]),t(re,{modelValue:se.value,"onUpdate:modelValue":e[15]||(e[15]=a=>se.value=a),title:"导入素材/面单文件",width:"600px",onClosed:Fl},{footer:o(()=>[t(i,{onClick:e[14]||(e[14]=a=>se.value=!1)},{default:o(()=>[...e[36]||(e[36]=[y("取消",-1)])]),_:1}),t(i,{type:"primary",loading:ye.value,onClick:wl},{default:o(()=>[...e[37]||(e[37]=[y("开始上传",-1)])]),_:1},8,["loading"])]),default:o(()=>[e[38]||(e[38]=r("div",{class:"upload-tip"},[r("p",null,[y("• 素材图文件名需与订单货号一致，例如 "),r("code",null,"ABC123.jpg")]),r("p",null,[y("• 面单文件需为 PDF，文件名需与订单 GSP 订单号一致，例如 "),r("code",null,"GSP0001.pdf")])],-1)),t(Ue,{class:"order-upload",drag:"",multiple:!0,"auto-upload":!1,"file-list":q.value,"on-change":Vl,"on-remove":Ul,accept:_t},{default:o(()=>[t(F,{class:"upload-icon"},{default:o(()=>[t(D(pa))]),_:1}),e[34]||(e[34]=r("div",{class:"el-upload__text"},[y("将文件拖到此处，或"),r("em",null,"点击上传")],-1)),e[35]||(e[35]=r("div",{class:"el-upload__tip"},"支持图片与 PDF 文件，可一次选择多个",-1))]),_:1},8,["file-list"]),w.value.success.length||w.value.failed.length?(c(),V("div",tt,[w.value.success.length?(c(),g(We,{key:0,title:"成功上传",type:"success","show-icon":"",closable:!1},{default:o(()=>[r("ul",null,[(c(!0),V(L,null,P(w.value.success,a=>(c(),V("li",{key:a.file_name},p(a.message),1))),128))])]),_:1})):E("",!0),w.value.failed.length?(c(),g(We,{key:1,title:"上传失败",type:"error","show-icon":"",closable:!1,style:{"margin-top":"12px"}},{default:o(()=>[r("ul",null,[(c(!0),V(L,null,P(w.value.failed,a=>(c(),V("li",{key:a.file_name},p(a.message),1))),128))])]),_:1})):E("",!0)])):E("",!0)]),_:1},8,["modelValue"]),t(re,{modelValue:M.value,"onUpdate:modelValue":e[17]||(e[17]=a=>M.value=a),title:pl.value,width:"520px",onClosed:Cl},{footer:o(()=>[t(i,{onClick:e[16]||(e[16]=a=>M.value=!1)},{default:o(()=>[...e[39]||(e[39]=[y("取消",-1)])]),_:1}),t(i,{type:"primary",loading:fe.value,onClick:zl},{default:o(()=>[...e[40]||(e[40]=[y("开始上传",-1)])]),_:1},8,["loading"])]),default:o(()=>[t(T,{model:S.value,ref_key:"uploadFormRef",ref:ul,"label-width":S.value.fileType==="import"?"auto":"100px","label-position":S.value.fileType==="import"?"top":"right",class:ca(["upload-form",S.value.fileType==="import"?"upload-form--import":""])},{default:o(()=>[S.value.fileType==="import"?(c(),g(m,{key:0,label:"导入文件",required:""},{default:o(()=>[t(Ue,{class:"upload-block",drag:"",action:"#","auto-upload":!1,"show-file-list":!0,limit:1,"before-upload":()=>!1,"on-change":qe,"on-remove":Be,"file-list":O.value,accept:Me.value},{default:o(()=>[t(F,{class:"upload-icon"},{default:o(()=>[t(D(el))]),_:1}),r("div",ot,p(Ie.value),1)]),_:1},8,["file-list","accept"])]),_:1})):(c(),g(m,{key:1,label:"附件文件",required:""},{default:o(()=>[t(Ue,{class:"upload-block",drag:"",action:"#","auto-upload":!1,"show-file-list":!0,limit:1,"before-upload":()=>!1,"on-change":qe,"on-remove":Be,"file-list":O.value,accept:Me.value},{default:o(()=>[t(F,{class:"upload-icon"},{default:o(()=>[t(D(el))]),_:1}),r("div",st,p(Ie.value),1)]),_:1},8,["file-list","accept"])]),_:1}))]),_:1},8,["model","label-width","label-position","class"])]),_:1},8,["modelValue","title"]),t(re,{modelValue:H.value,"onUpdate:modelValue":e[20]||(e[20]=a=>H.value=a),title:"选择素材图",width:"720px",onClosed:Jl},{footer:o(()=>[t(i,{onClick:e[19]||(e[19]=a=>H.value=!1)},{default:o(()=>[...e[44]||(e[44]=[y("取消",-1)])]),_:1}),t(i,{type:"primary",disabled:!I.value,onClick:Ql},{default:o(()=>[...e[45]||(e[45]=[y("确定",-1)])]),_:1},8,["disabled"])]),default:o(()=>[r("div",nt,[t(h,{modelValue:A.value,"onUpdate:modelValue":e[18]||(e[18]=a=>A.value=a),placeholder:"搜索编号/文件名/标题",clearable:"",class:"toolbar-search",onKeyup:_a(Se,["enter"]),onClear:Se},{append:o(()=>[t(i,{onClick:Se},{default:o(()=>[...e[41]||(e[41]=[y("搜索",-1)])]),_:1})]),_:1},8,["modelValue"]),t(i,{onClick:X,loading:te.value},{default:o(()=>[...e[42]||(e[42]=[y("刷新",-1)])]),_:1},8,["loading"])]),we((c(),g(Z,{ref_key:"materialSelectorTableRef",ref:Ee,data:oe.value,border:"",height:"360","highlight-current-row":"",onCurrentChange:Hl},{default:o(()=>[t(b,{label:"预览",width:"110"},{default:o(({row:a})=>[be(a)?(c(),g(z,{key:0,src:be(a),fit:"cover","preview-src-list":dl(a),style:{width:"72px",height:"72px"},"preview-teleported":!0},{error:o(()=>[...e[43]||(e[43]=[r("span",null,"--",-1)])]),_:1},8,["src","preview-src-list"])):(c(),V("span",rt,"--"))]),_:1}),t(b,{label:"编码 / 标题","min-width":"200","show-overflow-tooltip":""},{default:o(({row:a})=>[r("div",it,[r("div",ut,"编码："+p(a.code||"-"),1),r("div",dt,"标题："+p(a.title||"-"),1)])]),_:1}),t(b,{label:"尺寸 / 规格","min-width":"180"},{default:o(({row:a})=>[r("div",pt,[r("div",null,"尺寸："+p(sl(a)||"-"),1),r("div",null,"格式："+p((a.format||"-").toUpperCase()),1)])]),_:1})]),_:1},8,["data"])),[[Fe,te.value]]),r("div",ct,[t(Ve,{background:"",layout:"prev, pager, next, sizes, total","current-page":j.value,"page-size":ve.value,"page-sizes":[10,20,50],total:Oe.value,onCurrentChange:Gl,onSizeChange:Yl},null,8,["current-page","page-size","total"])])]),_:1},8,["modelValue"])])}}},gt=fa(mt,[["__scopeId","data-v-d8108cf0"]]);export{gt as default};
