const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-DWgCq8BS.js","assets/index-BI8oO-SX.js","assets/index-CTMv0EWP.css","assets/_plugin-vue_export-helper-DlAUqK2U.js","assets/Dashboard-CYbPkIHy.css","assets/Users-Ngrz4UJC.js","assets/date-B59vURDm.js","assets/Users-DYe7wFnT.css","assets/Departments-CJXVJAXu.js","assets/Departments-CzuJ9eZL.css","assets/Materials-CyEnMprj.js","assets/Materials-D9nB0lX5.css","assets/Roles-Dpyoutbl.js","assets/Roles-BbjWGuts.css","assets/Permissions-BSm8e6ov.js","assets/Permissions-7k76fvHp.css","assets/Resources-DUAeX4OT.js","assets/Resources-Dif8z6Ia.css","assets/Logs-Dx7tDLK2.js","assets/Logs-nOV_yLfh.css","assets/SystemMonitor-Ce_LmKYZ.js","assets/SystemMonitor-DntRdga3.css","assets/IPStatistics-D-afley_.js","assets/IPStatistics-C5W7OTzC.css","assets/Dicts-D2PkLh6f.js","assets/Dicts-D0ATBljV.css","assets/Configs-BNecbbKo.js","assets/Configs-ZVEbAfv8.css","assets/Notices-CtxvuTDE.js","assets/Notices-B2XyP1YM.css","assets/Orders-BTjU6pZ5.js","assets/Orders-C_Ul-CLf.css"])))=>i.map(i=>d[i]);
import{u as Mt,a as $t,c as $,l as Vt,r as k,i as At,w as _e,m as Dt,n as Lt,p as h,o,g as a,q as Be,s as fe,v as Ue,x as qe,y as Fe,z as Je,A as Ke,B as q,C as We,D as je,F as he,G as He,H as Z,h as y,I as It,f as l,e as d,d as c,J as b,t as w,K as f,L as Nt,M as St,N as xt,O as F,P as Ot,Q as V,R as D,S as O,T as Rt,U as zt,V as Bt,W as Ut,X as ee,k as C,Y as qt,Z as te,_ as ge,$ as we,a0 as T,E as Qe,a1 as E}from"./index-BI8oO-SX.js";import{f as Ft}from"./date-B59vURDm.js";import{_ as Jt}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Kt={class:"logo"},Wt=["title"],jt=["title"],Ht={key:0,class:"menu-tools"},Qt={class:"menu-search"},Gt={key:0,class:"quick-menu"},Xt={class:"quick-menu-title"},Yt={class:"quick-menu-list"},Zt=["onClick"],es={key:1,class:"menu-empty"},ts={class:"tabs-container"},ss={class:"tabs-wrapper"},as=["onClick"],ls={class:"tab-title"},ns={key:0,class:"split-controls"},os={class:"header-right"},is={class:"notice-list"},rs=["onClick"],us={class:"notice-title"},ds={class:"notice-time"},cs={key:0,class:"notice-empty"},ps={class:"notice-list"},ms={class:"notice-title"},vs={class:"notice-time"},_s={key:0,class:"notice-empty"},fs={class:"user-info"},hs={class:"user-info-text"},gs={class:"user-info-name"},ws={class:"user-info-meta"},ys={key:0,class:"split-container single"},ks={key:1,class:"split-container double"},bs={class:"split-panel-header"},Cs={class:"panel-title"},Ps={class:"panel-actions"},Ts={class:"split-panel-content"},Es={key:2,class:"split-container triple"},Ms={class:"split-panel-header"},$s={class:"panel-title"},Vs={class:"panel-actions"},As={class:"split-panel-content"},Ds={key:3,class:"split-container quadruple"},Ls={class:"split-panel-header"},Is={class:"panel-title"},Ns={class:"panel-actions"},Ss={class:"split-panel-content"},xs={__name:"MainLayout",setup(Os){const x=Vt(),L=At(),N=Mt(),H=$t();H.siteNameLoaded||H.loadSiteName().catch(()=>{});const ye=$(()=>x.path),S=k(!1),se=k("unread"),R=k([]),Q=k([]),ke=$(()=>R.value.length),Ge=$(()=>{var e,t;return((t=(e=N.user)==null?void 0:e.department)==null?void 0:t.name)||"未分配部门"}),Xe=$(()=>{var e,t;return((t=(e=N.user)==null?void 0:e.role)==null?void 0:t.name)||"未分配角色"}),Ye=$(()=>{var t;const e=(t=N.user)==null?void 0:t.employee_type;return e==="external"?"外部员工":e==="internal"?"内部员工":"员工类型未设置"}),Ze={House:Be,Setting:je,User:fe,UserFilled:Fe,Lock:Je,Document:Ke,List:q,DataAnalysis:It,Monitor:He,Tools:We,Bell:he,OfficeBuilding:Ue,Picture:qe},et=[{path:"/dashboard",title:"仪表盘",icon:Be,name:"Dashboard",order:10,permission:"menu:dashboard:view"},{path:"/system",title:"系统管理",icon:je,name:"System",order:20,permission:"menu:system:view",children:[{path:"/users",title:"用户管理",icon:fe,name:"Users",order:21,permission:"menu:users:view"},{path:"/departments",title:"部门管理",icon:Ue,name:"Departments",order:22,permission:"menu:departments:view"},{path:"/materials",title:"素材图库",icon:qe,name:"Materials",order:23,permission:"menu:materials:view"},{path:"/roles",title:"角色管理",icon:Fe,name:"Roles",order:24,permission:"menu:roles:view"},{path:"/permissions",title:"权限管理",icon:Je,name:"Permissions",order:25,permission:"menu:permissions:view"},{path:"/resources",title:"资源管理",icon:Ke,name:"Resources",order:26,permission:"menu:resources:view"},{path:"/dicts",title:"系统字典",icon:q,name:"Dicts",order:27,permission:"menu:dicts:view"},{path:"/configs",title:"系统参数",icon:We,name:"Configs",order:28,permission:"menu:configs:view"}]},{path:"/notices",title:"消息公告",icon:he,name:"Notices",order:30,permission:"menu:notices:view"},{path:"/orders",title:"订单管理",icon:q,name:"Orders",order:35,permission:"menu:orders:view"},{path:"/logs",title:"日志管理",icon:q,name:"Logs",order:40,permission:"menu:logs:view"},{path:"/system-monitor",title:"系统监控",icon:He,name:"SystemMonitor",order:45,permission:"menu:system-monitor:view"}],G=k([]),be=k(!1),ae={};L.getRoutes().forEach(e=>{const t=e.path.startsWith("/")?e.path:`/${e.path}`;ae[t]=e});const Ce=e=>e?e.startsWith("/")?e:`/${e}`:"",tt=e=>e?Ze[e]||q:q,st=(e,t)=>{var u;if((u=t==null?void 0:t.meta)!=null&&u.permission)return t.meta.permission;const s=Ce(e==null?void 0:e.path);if(!s)return null;const i=s.replace(/^\//,"").replace(/\//g,"-");return i?`menu:${i}:view`:null},Pe=(e=[])=>{if(!Array.isArray(e)||e.length===0)return[];const t=[];return e.forEach(s=>{var M;if(!s)return;const i=Pe(s.children||[]);if(s.type!=="menu"){t.push(...i);return}const u=Ce(s.path),_=u?ae[u]??ae[s.path]:void 0,P=st(s,_),z=i.filter(Boolean);!(!P||N.userPermissions.includes(P))&&z.length===0||t.push({path:u||`/menu-${s.id}`,title:s.name||((M=_==null?void 0:_.meta)==null?void 0:M.title)||(_==null?void 0:_.name)||u,icon:tt(s.icon),name:_==null?void 0:_.name,order:typeof s.sort=="number"?s.sort:0,permission:P,children:z})}),t.filter(Boolean).sort((s,i)=>{const u=s.order??0,_=i.order??0;return u===_?(s.title||"").localeCompare(i.title||"","zh-CN"):u-_})},Te=(e=[])=>!Array.isArray(e)||e.length===0?[]:e.map(t=>{const s=Te(t.children||[]);return!(!t.permission||N.userPermissions.includes(t.permission))&&s.length===0?null:{...t,children:s}}).filter(Boolean).sort((t,s)=>{const i=t.order??0,u=s.order??0;return i===u?(t.title||"").localeCompare(s.title||"","zh-CN"):i-u}),le=$(()=>{const e=Pe(G.value);return e.length>0?e:Te(et)}),at=async()=>{var e;try{be.value=!1;const s=(e=(await Z.get("/resources",{params:{tree:!0}})).data)==null?void 0:e.data;Array.isArray(s)?G.value=s:G.value=[]}catch(t){console.error("加载菜单资源失败",t),G.value=[]}finally{be.value=!0}},X=k(""),I=k({}),Y=k(!0),ne=$(()=>{var t;const e=(t=N.user)==null?void 0:t.id;return e?`menu_usage_${e}`:""}),lt=e=>{const t=[],s=i=>{i.forEach(u=>{u.children&&u.children.length?s(u.children):t.push(u)})};return s(e),t},Ee=$(()=>lt(le.value)),Me=(e,t)=>e.map(s=>{const i=s.title.toLowerCase().includes(t);if(s.children&&s.children.length){const u=Me(s.children,t);return i||u.length?{...s,children:u}:null}return i?{...s}:null}).filter(Boolean),$e=$(()=>{const e=X.value.trim().toLowerCase();return e?Me(le.value,e):le.value}),Ve=$(()=>{const e=Ee.value.slice();e.sort((i,u)=>{const _=I.value[i.path]||0,P=I.value[u.path]||0;return _!==P?P-_:(i.order||0)-(u.order||0)});const t=e.filter(i=>(I.value[i.path]||0)>0),s=e.filter(i=>!t.includes(i));return[...t,...s].slice(0,5)}),J=$(()=>H.siteName||"管理系统"),nt=$(()=>{const e=J.value;return e?e.length<=2?e:e.slice(0,2):"管理"}),K=k(!1),W=k(null),A=k({oldPassword:"",newPassword:"",confirmPassword:""}),ot={oldPassword:[{required:!0,message:"请输入原密码",trigger:"blur"}],newPassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,message:"密码长度至少6位",trigger:"blur"}],confirmPassword:[{required:!0,message:"请再次输入新密码",trigger:"blur"},{validator:(e,t,s)=>{t!==A.value.newPassword?s(new Error("两次输入的密码不一致")):s()},trigger:"blur"}]},Ae={Dashboard:"仪表盘",Users:"用户管理",Departments:"部门管理",Materials:"素材图库",Roles:"角色管理",Permissions:"权限管理",Resources:"资源管理",Logs:"日志管理",SystemMonitor:"系统监控",Dicts:"系统字典",Configs:"系统参数",Notices:"消息公告",Orders:"订单管理"},it=$(()=>{const e=J.value||"管理系统",t=x.name,s=t?Ae[t]:"";return s?`${s} - ${e}`:e});_e(it,e=>{H.updateDocumentTitle(e)},{immediate:!0});const rt=()=>{const e=ne.value;if(!e){I.value={};return}try{const t=localStorage.getItem(e),s=t?JSON.parse(t):{};I.value=s&&typeof s=="object"?s:{}}catch(t){console.warn("加载菜单使用记录失败",t),I.value={}}},De=e=>{const t=ne.value;if(!t||!Ee.value.some(i=>i.path===e))return;const s={...I.value,[e]:(I.value[e]||0)+1};I.value=s;try{localStorage.setItem(t,JSON.stringify(s))}catch(i){console.warn("记录菜单使用次数失败",i)}},ut=e=>{e&&L.push(e)};_e(ne,()=>{rt()},{immediate:!0}),_e(S,e=>{e&&(X.value="")});const g=k([]),oe=k(""),p=k(1),r=k([]),ie=k(null),Le={Dashboard:T(()=>E(()=>import("./Dashboard-DWgCq8BS.js"),__vite__mapDeps([0,1,2,3,4]))),Users:T(()=>E(()=>import("./Users-Ngrz4UJC.js"),__vite__mapDeps([5,1,2,6,3,7]))),Departments:T(()=>E(()=>import("./Departments-CJXVJAXu.js"),__vite__mapDeps([8,1,2,6,3,9]))),Materials:T(()=>E(()=>import("./Materials-CyEnMprj.js"),__vite__mapDeps([10,1,2,6,3,11]))),Roles:T(()=>E(()=>import("./Roles-Dpyoutbl.js"),__vite__mapDeps([12,1,2,6,3,13]))),Permissions:T(()=>E(()=>import("./Permissions-BSm8e6ov.js"),__vite__mapDeps([14,1,2,6,3,15]))),Resources:T(()=>E(()=>import("./Resources-DUAeX4OT.js"),__vite__mapDeps([16,1,2,3,17]))),Logs:T(()=>E(()=>import("./Logs-Dx7tDLK2.js"),__vite__mapDeps([18,1,2,6,3,19]))),SystemMonitor:T(()=>E(()=>import("./SystemMonitor-Ce_LmKYZ.js"),__vite__mapDeps([20,1,2,3,21]))),IPStatistics:T(()=>E(()=>import("./IPStatistics-D-afley_.js"),__vite__mapDeps([22,1,2,6,3,23]))),Dicts:T(()=>E(()=>import("./Dicts-D2PkLh6f.js"),__vite__mapDeps([24,1,2,6,3,25]))),Configs:T(()=>E(()=>import("./Configs-BNecbbKo.js"),__vite__mapDeps([26,1,2,6,3,27]))),Notices:T(()=>E(()=>import("./Notices-CtxvuTDE.js"),__vite__mapDeps([28,1,2,6,3,29]))),Orders:T(()=>E(()=>import("./Orders-BTjU6pZ5.js"),__vite__mapDeps([30,1,2,6,3,31])))},re=e=>!e||!Le[e]?null:Le[e],dt=e=>{const t=parseInt(e);p.value=t,t===1?r.value=[]:ct()},ct=()=>{const e=p.value,t=r.value.length;if(t<e)for(let i=t;i<e;i++){const u=g.value.find(_=>!r.value.some(P=>P.path===_.path));u?r.value.push({path:u.path,name:u.name,title:u.title}):g.value[i]&&r.value.push({path:g.value[i].path,name:g.value[i].name,title:g.value[i].title})}else t>e&&(r.value=r.value.slice(0,e));const s=new Set;if(r.value=r.value.filter(i=>s.has(i.path)?!1:(s.add(i.path),!0)),r.value.length<e){const i=e-r.value.length;for(let u=0;u<i;u++){const _=g.value.find(P=>!r.value.some(z=>z.path===P.path));_&&r.value.push({path:_.path,name:_.name,title:_.title})}}},ue=e=>{if(r.value[e]){const t=r.value[e].path;Ne(t),r.value.splice(e,1),r.value.length===0?p.value=1:p.value===4&&r.value.length===3?p.value=3:p.value===3&&r.value.length===2?p.value=2:p.value===2&&r.value.length===1&&(p.value=1,r.value=[])}},Ie=(e,t)=>{const s=Ae[t]||t;if(g.value.find(u=>u.path===e)||g.value.push({path:e,name:t,title:s}),oe.value=e,p.value>1){const u={path:e,name:t,title:s};r.value.findIndex(P=>P.path===e)===-1&&(r.value.length<p.value?r.value.push(u):r.value[0]=u)}},Ne=e=>{const t=g.value.findIndex(s=>s.path===e);if(t>-1&&(g.value.splice(t,1),oe.value===e))if(g.value.length>0){const s=g.value[Math.min(t,g.value.length-1)];L.push(s.path)}else L.push("/dashboard")},pt=e=>{if(L.push(e),p.value>1){const t=g.value.find(s=>s.path===e);t&&r.value.findIndex(i=>i.path===e)===-1&&(r.value.length>0?r.value[0]={path:t.path,name:t.name,title:t.title}:r.value.push({path:t.path,name:t.name,title:t.title}))}},de=(e,t)=>{const s=g.value.find(i=>i.path===t);s&&r.value[e]&&(r.value[e]={path:s.path,name:s.name,title:s.title})},ce=e=>{r.value[e]&&(ie.value=e,p.value=1,L.push(r.value[e].path))},pe=e=>{if(r.value.length<=1){p.value=1,r.value=[],ie.value=null;return}r.value.splice(e,1),p.value===4&&r.value.length===3?p.value=3:p.value===3&&r.value.length===2?p.value=2:p.value===2&&r.value.length===1&&(p.value=1,r.value=[]),ie.value=null},Se=Ft,mt=()=>{S.value=!S.value},vt=async e=>{e==="logout"?(N.logout(),L.push("/login")):e==="changePassword"&&_t()},_t=()=>{A.value={oldPassword:"",newPassword:"",confirmPassword:""},K.value=!0,W.value&&W.value.clearValidate()},ft=async()=>{var e,t;if(W.value)try{await W.value.validate(),await Z.put("/auth/change-password",{old_password:A.value.oldPassword,new_password:A.value.newPassword}),Qe.success("密码修改成功"),K.value=!1,A.value={oldPassword:"",newPassword:"",confirmPassword:""}}catch(s){s!==!1&&Qe.error(((t=(e=s.response)==null?void 0:e.data)==null?void 0:t.error)||"密码修改失败")}},xe=async()=>{try{const t=(await Z.get("/notices?page=1&page_size=10")).data.data||[];R.value=t.filter(s=>s.is_read===0||!s.is_read),Q.value=t.filter(s=>s.is_read===1)}catch(e){console.error("加载消息失败",e)}},ht=e=>{se.value=e},gt=e=>{},wt=async e=>{try{await Z.put(`/notices/${e.id}/read`),e.is_read=1,R.value=R.value.filter(t=>t.id!==e.id),Q.value.unshift(e),L.push(`/notices?id=${e.id}`)}catch{L.push(`/notices?id=${e.id}`)}};let me=null;const Oe=()=>{document.querySelectorAll(".sidebar-menu .el-sub-menu.is-opened > .el-sub-menu__title").forEach(t=>{t.matches(":hover")||(t.style.backgroundColor="transparent",t.style.background="transparent")})};return L.afterEach(e=>{var t;e.name&&((t=e.meta)==null?void 0:t.requiresAuth)!==!1&&(Ie(e.path,e.name),De(e.path))}),Dt(()=>{var t;at(),x.name&&((t=x.meta)==null?void 0:t.requiresAuth)!==!1&&(Ie(x.path,x.name),De(x.path)),xe(),me=setInterval(()=>{xe()},3e4);const e=document.querySelector(".sidebar-menu");e&&(e.addEventListener("click",()=>{setTimeout(Oe,10)}),new MutationObserver(()=>{Oe()}).observe(e,{attributes:!0,subtree:!0,attributeFilter:["class"]}))}),Lt(()=>{me&&clearInterval(me)}),(e,t)=>{const s=y("el-icon"),i=y("el-input"),u=y("el-menu-item"),_=y("el-sub-menu"),P=y("el-menu"),z=y("el-aside"),j=y("el-button"),M=y("el-dropdown-item"),B=y("el-dropdown-menu"),U=y("el-dropdown"),yt=y("el-badge"),Re=y("el-tab-pane"),kt=y("el-tabs"),bt=y("el-header"),Ct=y("router-view"),Pt=y("el-main"),ze=y("el-container"),ve=y("el-form-item"),Tt=y("el-form"),Et=y("el-dialog");return o(),h(ze,{class:"layout-container"},{default:a(()=>[l(z,{width:S.value?"64px":"220px",class:"sidebar"},{default:a(()=>[d("div",Kt,[S.value?(o(),c("h2",{key:1,title:J.value},w(nt.value),9,jt)):(o(),c("h2",{key:0,title:J.value},w(J.value),9,Wt))]),S.value?b("",!0):(o(),c("div",Ht,[d("div",Qt,[l(i,{modelValue:X.value,"onUpdate:modelValue":t[0]||(t[0]=n=>X.value=n),placeholder:"搜索菜单",clearable:"",size:"default",class:"menu-search-input"},{prefix:a(()=>[l(s,{class:"menu-search-icon"},{default:a(()=>[l(f(Nt))]),_:1})]),_:1},8,["modelValue"])]),Ve.value.length?(o(),c("div",Gt,[d("div",{class:"quick-menu-header",onClick:t[1]||(t[1]=n=>Y.value=!Y.value)},[d("div",Xt,[l(s,null,{default:a(()=>[l(f(xt))]),_:1}),t[9]||(t[9]=d("span",null,"快捷菜单",-1))]),l(s,{class:F(["quick-menu-toggle",{expanded:!Y.value}])},{default:a(()=>[l(f(Ot))]),_:1},8,["class"])]),St(d("div",Yt,[(o(!0),c(V,null,D(Ve.value,n=>(o(),c("div",{key:n.path,class:F(["quick-menu-item",{active:ye.value===n.path}]),onClick:m=>ut(n.path)},[n.icon?(o(),h(s,{key:0},{default:a(()=>[(o(),h(O(n.icon)))]),_:2},1024)):b("",!0),d("span",null,w(n.title),1)],10,Zt))),128))],512),[[Rt,!Y.value]])])):b("",!0)])),$e.value.length===0?(o(),c("div",es," 暂无匹配菜单 ")):(o(),h(P,{key:2,"default-active":ye.value,collapse:S.value,router:"",class:"sidebar-menu"},{default:a(()=>[(o(!0),c(V,null,D($e.value,n=>(o(),c(V,{key:n.path},[n.children&&n.children.length?(o(),h(_,{key:0,index:n.path},{title:a(()=>[n.icon?(o(),h(s,{key:0},{default:a(()=>[(o(),h(O(n.icon)))]),_:2},1024)):b("",!0),d("span",null,w(n.title),1)]),default:a(()=>[(o(!0),c(V,null,D(n.children,m=>(o(),h(u,{key:m.path,index:m.path},{default:a(()=>[m.icon?(o(),h(s,{key:0},{default:a(()=>[(o(),h(O(m.icon)))]),_:2},1024)):b("",!0),d("span",null,w(m.title),1)]),_:2},1032,["index"]))),128))]),_:2},1032,["index"])):(o(),h(u,{key:1,index:n.path},{default:a(()=>[n.icon?(o(),h(s,{key:0},{default:a(()=>[(o(),h(O(n.icon)))]),_:2},1024)):b("",!0),d("span",null,w(n.title),1)]),_:2},1032,["index"]))],64))),128))]),_:1},8,["default-active","collapse"]))]),_:1},8,["width"]),l(ze,null,{default:a(()=>[l(bt,{class:"header"},{default:a(()=>[d("div",ts,[d("div",{class:"collapse-btn",onClick:mt},[l(s,null,{default:a(()=>[S.value?(o(),h(f(zt),{key:0})):(o(),h(f(Bt),{key:1}))]),_:1})]),d("div",ss,[(o(!0),c(V,null,D(g.value,n=>(o(),c("div",{key:n.path,class:F(["tab-item",{active:n.path===oe.value}]),onClick:m=>pt(n.path)},[d("span",ls,w(n.title),1),g.value.length>1?(o(),h(s,{key:0,class:"tab-close",onClick:Ut(m=>Ne(n.path),["stop"])},{default:a(()=>[l(f(ee))]),_:1},8,["onClick"])):b("",!0)],10,as))),128))]),g.value.length>1?(o(),c("div",ns,[l(U,{onCommand:dt,trigger:"click"},{dropdown:a(()=>[l(B,null,{default:a(()=>[l(M,{command:"1",disabled:p.value===1},{default:a(()=>[...t[11]||(t[11]=[C("单屏",-1)])]),_:1},8,["disabled"]),l(M,{command:"2",disabled:p.value===2},{default:a(()=>[...t[12]||(t[12]=[C("2分屏",-1)])]),_:1},8,["disabled"]),l(M,{command:"3",disabled:p.value===3},{default:a(()=>[...t[13]||(t[13]=[C("3分屏",-1)])]),_:1},8,["disabled"]),l(M,{command:"4",disabled:p.value===4},{default:a(()=>[...t[14]||(t[14]=[C("4分屏",-1)])]),_:1},8,["disabled"])]),_:1})]),default:a(()=>[l(j,{size:"default",text:"",class:"split-btn"},{default:a(()=>[l(s,null,{default:a(()=>[l(f(qt))]),_:1}),t[10]||(t[10]=C(" 分屏 ",-1))]),_:1})]),_:1})])):b("",!0)]),d("div",os,[l(U,{onCommand:gt,trigger:"click"},{dropdown:a(()=>[l(B,{class:"notice-dropdown-menu"},{default:a(()=>[t[16]||(t[16]=d("div",{class:"notice-dropdown-header"},[d("span",{class:"notice-dropdown-title"},"消息通知")],-1)),l(kt,{modelValue:se.value,"onUpdate:modelValue":t[2]||(t[2]=n=>se.value=n),onTabChange:ht,class:"notice-tabs"},{default:a(()=>[l(Re,{label:"未读",name:"unread"},{default:a(()=>[d("div",is,[(o(!0),c(V,null,D(R.value,n=>(o(),c("div",{key:n.id,class:"notice-item",onClick:m=>wt(n)},[d("div",us,w(n.title),1),d("div",ds,w(f(Se)(n.created_at)),1)],8,rs))),128)),R.value.length===0?(o(),c("div",cs,"暂无未读消息")):b("",!0)])]),_:1}),l(Re,{label:"已读",name:"read"},{default:a(()=>[d("div",ps,[(o(!0),c(V,null,D(Q.value,n=>(o(),c("div",{key:n.id,class:"notice-item read"},[d("div",ms,w(n.title),1),d("div",vs,w(f(Se)(n.created_at)),1)]))),128)),Q.value.length===0?(o(),c("div",_s,"暂无已读消息")):b("",!0)])]),_:1})]),_:1},8,["modelValue"]),l(M,{divided:""},{default:a(()=>[l(j,{text:"",onClick:t[3]||(t[3]=n=>f(L).push("/notices")),style:{width:"100%"}},{default:a(()=>[...t[15]||(t[15]=[C("查看全部",-1)])]),_:1})]),_:1})]),_:1})]),default:a(()=>[l(yt,{value:ke.value,hidden:ke.value===0,class:"notice-badge"},{default:a(()=>[l(s,{style:{"font-size":"20px",cursor:"pointer"}},{default:a(()=>[l(f(he))]),_:1})]),_:1},8,["value","hidden"])]),_:1}),l(U,{onCommand:vt},{dropdown:a(()=>[l(B,{class:"user-dropdown-menu"},{default:a(()=>[l(M,{command:"changePassword"},{default:a(()=>[...t[17]||(t[17]=[C("修改密码",-1)])]),_:1}),l(M,{divided:"",command:"logout"},{default:a(()=>[...t[18]||(t[18]=[C("退出登录",-1)])]),_:1})]),_:1})]),default:a(()=>{var n;return[d("span",fs,[l(s,null,{default:a(()=>[l(f(fe))]),_:1}),d("div",hs,[d("span",gs,w((n=f(N).user)==null?void 0:n.username),1),d("span",ws,w(Ge.value)+" · "+w(Xe.value)+" · "+w(Ye.value),1)]),l(s,{class:"el-icon--right"},{default:a(()=>[l(f(te))]),_:1})])]}),_:1})])]),_:1}),l(Pt,{class:"main-content"},{default:a(()=>[p.value===1?(o(),c("div",ys,[l(Ct)])):p.value===2?(o(),c("div",ks,[(o(!0),c(V,null,D(r.value.slice(0,2),(n,m)=>(o(),c("div",{class:"split-panel",key:`${n.path}-${m}`},[d("div",bs,[l(U,{onCommand:v=>de(m,v),trigger:"click"},{dropdown:a(()=>[l(B,null,{default:a(()=>[(o(!0),c(V,null,D(g.value,v=>(o(),h(M,{key:v.path,command:v.path,class:F({"is-active":n.path===v.path})},{default:a(()=>[C(w(v.title),1)]),_:2},1032,["command","class"]))),128))]),_:2},1024)]),default:a(()=>[d("span",Cs,[C(w(n.title)+" ",1),l(s,{class:"el-icon--right",style:{"margin-left":"4px","font-size":"16px"}},{default:a(()=>[l(f(te))]),_:1})])]),_:2},1032,["onCommand"]),d("div",Ps,[r.value.length>1?(o(),h(s,{key:0,class:"panel-action-btn",onClick:v=>pe(m),title:"最小化（隐藏当前面板）"},{default:a(()=>[l(f(ge))]),_:1},8,["onClick"])):b("",!0),l(s,{class:"panel-action-btn",onClick:v=>ce(m),title:"最大化（全屏显示）"},{default:a(()=>[l(f(we))]),_:1},8,["onClick"]),l(s,{class:"panel-close",onClick:v=>ue(m),title:"关闭（关闭面板和标签页）"},{default:a(()=>[l(f(ee))]),_:1},8,["onClick"])])]),d("div",Ts,[n.name?(o(),h(O(re(n.name)),{key:`${n.path}-${m}-${p.value}`})):b("",!0)])]))),128))])):p.value===3?(o(),c("div",Es,[(o(!0),c(V,null,D(r.value.slice(0,3),(n,m)=>(o(),c("div",{class:"split-panel",key:`${n.path}-${m}`},[d("div",Ms,[l(U,{onCommand:v=>de(m,v),trigger:"click"},{dropdown:a(()=>[l(B,null,{default:a(()=>[(o(!0),c(V,null,D(g.value,v=>(o(),h(M,{key:v.path,command:v.path,class:F({"is-active":n.path===v.path})},{default:a(()=>[C(w(v.title),1)]),_:2},1032,["command","class"]))),128))]),_:2},1024)]),default:a(()=>[d("span",$s,[C(w(n.title)+" ",1),l(s,{class:"el-icon--right",style:{"margin-left":"4px","font-size":"16px"}},{default:a(()=>[l(f(te))]),_:1})])]),_:2},1032,["onCommand"]),d("div",Vs,[r.value.length>1?(o(),h(s,{key:0,class:"panel-action-btn",onClick:v=>pe(m),title:"最小化（隐藏当前面板）"},{default:a(()=>[l(f(ge))]),_:1},8,["onClick"])):b("",!0),l(s,{class:"panel-action-btn",onClick:v=>ce(m),title:"最大化（全屏显示）"},{default:a(()=>[l(f(we))]),_:1},8,["onClick"]),l(s,{class:"panel-close",onClick:v=>ue(m),title:"关闭（关闭面板和标签页）"},{default:a(()=>[l(f(ee))]),_:1},8,["onClick"])])]),d("div",As,[n.name?(o(),h(O(re(n.name)),{key:`${n.path}-${m}-${p.value}`})):b("",!0)])]))),128))])):p.value===4?(o(),c("div",Ds,[(o(!0),c(V,null,D(r.value.slice(0,4),(n,m)=>(o(),c("div",{class:"split-panel",key:`${n.path}-${m}`},[d("div",Ls,[l(U,{onCommand:v=>de(m,v),trigger:"click"},{dropdown:a(()=>[l(B,null,{default:a(()=>[(o(!0),c(V,null,D(g.value,v=>(o(),h(M,{key:v.path,command:v.path,class:F({"is-active":n.path===v.path})},{default:a(()=>[C(w(v.title),1)]),_:2},1032,["command","class"]))),128))]),_:2},1024)]),default:a(()=>[d("span",Is,[C(w(n.title)+" ",1),l(s,{class:"el-icon--right",style:{"margin-left":"4px","font-size":"16px"}},{default:a(()=>[l(f(te))]),_:1})])]),_:2},1032,["onCommand"]),d("div",Ns,[r.value.length>1?(o(),h(s,{key:0,class:"panel-action-btn",onClick:v=>pe(m),title:"最小化（隐藏当前面板）"},{default:a(()=>[l(f(ge))]),_:1},8,["onClick"])):b("",!0),l(s,{class:"panel-action-btn",onClick:v=>ce(m),title:"最大化（全屏显示）"},{default:a(()=>[l(f(we))]),_:1},8,["onClick"]),l(s,{class:"panel-close",onClick:v=>ue(m),title:"关闭（关闭面板和标签页）"},{default:a(()=>[l(f(ee))]),_:1},8,["onClick"])])]),d("div",Ss,[n.name?(o(),h(O(re(n.name)),{key:`${n.path}-${m}-${p.value}`})):b("",!0)])]))),128))])):b("",!0)]),_:1})]),_:1}),l(Et,{modelValue:K.value,"onUpdate:modelValue":t[8]||(t[8]=n=>K.value=n),title:"修改密码",width:"500px"},{footer:a(()=>[l(j,{onClick:t[7]||(t[7]=n=>K.value=!1)},{default:a(()=>[...t[19]||(t[19]=[C("取消",-1)])]),_:1}),l(j,{type:"primary",onClick:ft},{default:a(()=>[...t[20]||(t[20]=[C("确定",-1)])]),_:1})]),default:a(()=>[l(Tt,{model:A.value,rules:ot,ref_key:"passwordFormRef",ref:W,"label-width":"100px"},{default:a(()=>[l(ve,{label:"原密码",prop:"oldPassword"},{default:a(()=>[l(i,{modelValue:A.value.oldPassword,"onUpdate:modelValue":t[4]||(t[4]=n=>A.value.oldPassword=n),type:"password",placeholder:"请输入原密码","show-password":""},null,8,["modelValue"])]),_:1}),l(ve,{label:"新密码",prop:"newPassword"},{default:a(()=>[l(i,{modelValue:A.value.newPassword,"onUpdate:modelValue":t[5]||(t[5]=n=>A.value.newPassword=n),type:"password",placeholder:"请输入新密码（至少6位）","show-password":""},null,8,["modelValue"])]),_:1}),l(ve,{label:"确认新密码",prop:"confirmPassword"},{default:a(()=>[l(i,{modelValue:A.value.confirmPassword,"onUpdate:modelValue":t[6]||(t[6]=n=>A.value.confirmPassword=n),type:"password",placeholder:"请再次输入新密码","show-password":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1})}}},Us=Jt(xs,[["__scopeId","data-v-0ef446f7"]]);export{Us as default};
